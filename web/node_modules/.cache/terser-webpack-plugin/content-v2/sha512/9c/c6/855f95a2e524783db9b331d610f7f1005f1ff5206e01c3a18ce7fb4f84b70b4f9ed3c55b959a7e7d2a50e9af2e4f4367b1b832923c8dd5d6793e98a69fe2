{"code":"(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{107:function(e,t,a){},182:function(e,t,a){\"use strict\";a.r(t);var n=a(2),s=a.n(n),c=a(32),o=a.n(c),r=(a(107),a(108),a(12)),i=a(13),l=a(15),d=a(14),u=a(23),h=a(11),m=a(22),g=a(102),j=a(1),f=function(e){var t=e.component,a=e.can,n=void 0===a?function(){return!0}:a,s=e.redirect,c=Object(g.a)(e,[\"component\",\"can\",\"redirect\"]);return Object(j.jsx)(h.b,Object(m.a)(Object(m.a)({},c),{},{render:function(e){return n()?Object(j.jsx)(t,Object(m.a)({},e)):Object(j.jsx)(h.a,{to:s})}}))},p=a(189),b=a(184),O=a(98),C=a(197),v=a(190),x=a(191),S=a(192),w=a(183),k=function(e){return e.error?Object(j.jsx)(w.a,{color:\"danger\",children:e.error}):\"\"},N=function(e){var t=e.src?\"uploads/\".concat(e.src):\"data:image/png;base64,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\";return Object(j.jsx)(\"img\",{src:e.file||t,className:\"img-fluid rounded-circle ml-3 avatar\",alt:\"\"})},A=function(e){var t;return Object(j.jsxs)(b.a,{className:\"heading\",children:[Object(j.jsx)(N,{src:null===(t=e.user)||void 0===t?void 0:t.avatar}),Object(j.jsx)(\"div\",{children:\"Contacts\"}),Object(j.jsx)(\"div\",{className:\"mr-auto nav-link\",onClick:e.toggle,children:Object(j.jsx)(\"i\",{className:\"fa fa-bars\"})})]})},T=a(43),y=a(30),I=a.n(y),U=a(185),H=function(e){return Object(j.jsxs)(\"div\",{className:\"contact\",children:[Object(j.jsxs)(\"div\",{children:[Object(j.jsx)(N,{src:e.contact.avatar}),!0===e.contact.status?Object(j.jsx)(\"i\",{className:\"fa fa-circle online\"}):\"\"]}),Object(j.jsxs)(\"div\",{className:\"w-50\",children:[Object(j.jsx)(\"div\",{className:\"name\",children:e.contact.name}),Object(j.jsx)(\"div\",{className:\"small last-message\",children:e.message?e.message.content:\"Click here to start the conversation\"})]}),Object(j.jsxs)(\"div\",{className:\"flex-grow-1 text-left\",children:[Object(j.jsx)(\"div\",{className:\"small text-muted\",children:e.message?I()(e.message.date).format(\"hh:mm a\"):\"\"}),e.unseen>0?Object(j.jsx)(U.a,{color:\"success\",children:e.unseen}):\"\"]})]})},D=a(186),M=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={search:\"\"},e.onSearch=function(t){return e.setState({search:t.target.value})},e.renderContact=function(t,a){if(t.name.includes(e.state.search)){var n=e.props.messages.filter((function(e){return e.sender===t.id||e.receiver===t.id})),s=n[n.length-1],c=n.filter((function(e){return!e.seen&&e.sender===t.id})).length;return Object(j.jsx)(\"div\",{className:\"w-100\",onClick:e.props.onChatNavigate.bind(Object(T.a)(e),t),children:Object(j.jsx)(H,{contact:t,message:s,unseen:c})},a)}},e}return Object(i.a)(a,[{key:\"render\",value:function(){var e=this;return Object(j.jsxs)(\"div\",{className:\"list\",children:[Object(j.jsx)(b.a,{className:\"search\",children:Object(j.jsx)(D.a,{onChange:this.onSearch,placeholder:\"Search\"})}),Object(j.jsx)(b.a,{id:\"contacts\",children:this.props.contacts.map((function(t,a){return e.renderContact(t,a)}))})]})}}]),a}(s.a.Component),R=a(194),P=a(195),E=a(196),q=a(187),G=Object(h.g)((function(e){var t,a;return Object(j.jsxs)(b.a,{className:\"heading m-0 align-items-center w-100\",style:{padding:\"0.5rem\",justifyContent:\"space-between\"},children:[Object(j.jsxs)(\"div\",{className:\"d-flex align-items-center\",onClick:e.toggle,style:{cursor:\"pointer\"},children:[Object(j.jsx)(N,{src:null===(t=e.contact)||void 0===t?void 0:t.avatar}),Object(j.jsxs)(\"div\",{className:\"text-left ml-2\",children:[Object(j.jsx)(\"div\",{children:(null===(a=e.contact)||void 0===a?void 0:a.name)||\"\"}),Object(j.jsx)(\"small\",{children:e.typing?\"Typing now\":!0===e.contact.status?\"Online now\":e.contact.status?I()(e.contact.status).fromNow():\"\"})]})]}),Object(j.jsxs)(\"div\",{className:\"d-flex align-items-center\",style:{marginLeft:\"0.5rem\"},children:[Object(j.jsx)(O.a,{color:\"success\",onClick:function(){console.log(\"[ChatHeader] Call button clicked\"),e.onCall&&e.onCall(e.contact)},className:\"mr-2\",children:Object(j.jsx)(\"i\",{className:\"fa fa-phone\"})}),Object(j.jsxs)(R.a,{children:[Object(j.jsx)(P.a,{tag:\"a\",className:\"nav-link\",style:{cursor:\"pointer\"},children:Object(j.jsx)(\"i\",{className:\"fa fa-ellipsis-v\"})}),Object(j.jsxs)(E.a,{children:[Object(j.jsx)(q.a,{onClick:function(){return e.history.push(\"/password\")},children:\"Change Password\"}),Object(j.jsx)(q.a,{divider:!0}),Object(j.jsx)(q.a,{onClick:e.logout,children:\"Logout\"})]})]})]})]})})),B=function(e){return Object(j.jsx)(\"div\",{className:e.message.outgoing?\"message-item\":\"message-item incoming\",children:Object(j.jsx)(\"div\",{className:\"d-flex flex-row\",children:Object(j.jsxs)(\"div\",{className:\"body m-1 mr-2\",children:[Object(j.jsx)(\"div\",{children:e.message.content}),Object(j.jsx)(\"span\",{className:\"small text-muted\",children:I()(e.message.date).format(\"hh:mm a | MMM D\")})]})})})},L=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).renderMessage=function(t,a){return t.outgoing=t.receiver!==e.props.user.id,Object(j.jsx)(B,{message:t},a)},e}return Object(i.a)(a,[{key:\"render\",value:function(){return Object(j.jsx)(\"div\",{id:\"messages\",children:this.props.messages.map(this.renderMessage)})}}]),a}(s.a.Component),V=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={message:\"\",lastType:!1},e.onChange=function(t){return e.setState({message:t.target.value})},e.onSend=function(t){if(e.state.message){var a={content:e.state.message,date:(new Date).getTime()};e.props.sender(a),e.setState({message:\"\"})}},e.onKeyDown=function(t){\"Enter\"!==t.key||t.shiftKey?(!e.state.lastType||I()()-e.state.lastType>2e3)&&(e.setState({lastType:I()()}),e.props.sendType()):(e.setState({lastType:!1}),e.onSend(),t.preventDefault())},e}return Object(i.a)(a,[{key:\"render\",value:function(){return Object(j.jsxs)(\"div\",{id:\"send-message\",children:[Object(j.jsx)(D.a,{type:\"textarea\",rows:\"1\",onChange:this.onChange,onKeyDown:this.onKeyDown,value:this.state.message,placeholder:\"Write your message here\"}),Object(j.jsx)(\"i\",{className:\"fa fa-send text-muted px-3 send\",onClick:this.onSend})]})}}]),a}(s.a.Component),Z=function(e){return Object(j.jsxs)(\"div\",{className:e.open?\"side-profile open\":\"side-profile\",children:[Object(j.jsxs)(b.a,{className:\"heading\",children:[Object(j.jsx)(\"div\",{className:\"mr-2 nav-link\",onClick:e.toggle,children:Object(j.jsx)(\"i\",{className:\"fa fa-arrow-right\"})}),Object(j.jsx)(\"div\",{children:e.contact.name})]}),Object(j.jsxs)(\"div\",{className:\"d-flex flex-column overflow-auto\",children:[Object(j.jsx)(N,{src:e.contact.avatar}),Object(j.jsxs)(\"div\",{className:\"bg-white px-3 py-2\",children:[Object(j.jsx)(\"label\",{className:\"text-muted\",children:\"Status Message\"}),Object(j.jsx)(\"p\",{children:e.contact.about?e.contact.about:\"Hello, I am using chat me\"})]})]})]})},F=a(188),X=a(18),J=a.n(X),K=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(r.a)(this,a),(n=t.call(this,e)).showFileUpload=function(){return n.fileUpload.current.click()},n.onImageChange=function(e){e.target.files&&e.target.files[0]&&n.setState({image:URL.createObjectURL(e.target.files[0]),avatar:e.target.files[0]})},n.onChange=function(e){return n.setState({[e.target.name]:e.target.value,error:null})},n.onSubmit=function(e){e.preventDefault();var t=new FormData;t.append(\"name\",n.state.name),t.append(\"about\",n.state.about),n.state.avatar&&t.append(\"avatar\",n.state.avatar,n.state.avatar.name),J.a.post(\"/api/account\",t).then(n.props.toggle).catch((function(e){var t,a;n.setState({error:(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||\"An error occurred.\"})}))},n.onClose=function(){var e=n.props.user||{};n.setState({image:null,avatar:null,name:e.name||\"\",about:e.about||\"\"}),n.props.toggle()};var c=e.user||{};return n.state={name:c.name||\"\",about:c.about||\"\",image:null,avatar:null,error:null},n.fileUpload=s.a.createRef(),n}return Object(i.a)(a,[{key:\"render\",value:function(){var e;return Object(j.jsxs)(\"div\",{className:this.props.open?\"side-profile open\":\"side-profile\",children:[Object(j.jsxs)(b.a,{className:\"heading\",children:[Object(j.jsx)(\"div\",{className:\"mr-2 nav-link\",onClick:this.onClose,children:Object(j.jsx)(\"i\",{className:\"fa fa-arrow-right\"})}),Object(j.jsx)(\"div\",{children:\"Profile\"})]}),Object(j.jsx)(\"div\",{className:\"d-flex flex-column\",style:{overflow:\"auto\"},children:Object(j.jsxs)(F.a,{onSubmit:this.onSubmit,children:[Object(j.jsx)(k,{error:this.state.error}),Object(j.jsx)(\"div\",{className:\"text-center\",onClick:this.showFileUpload,children:Object(j.jsx)(N,{src:null===(e=this.props.user)||void 0===e?void 0:e.avatar,file:this.state.image})}),Object(j.jsx)(\"input\",{type:\"file\",ref:this.fileUpload,onChange:this.onImageChange,className:\"d-none\"}),Object(j.jsxs)(\"div\",{className:\"bg-white px-4 py-2\",children:[Object(j.jsx)(\"label\",{className:\"text-muted\",children:\"Name\"}),Object(j.jsx)(D.a,{value:this.state.name,name:\"name\",onChange:this.onChange,required:!0,autoComplete:\"off\"})]}),Object(j.jsxs)(\"div\",{className:\"bg-white px-3 py-2\",children:[Object(j.jsx)(\"label\",{className:\"text-muted\",children:\"Status Message\"}),Object(j.jsx)(D.a,{value:this.state.about,name:\"about\",onChange:this.onChange,required:!0,autoComplete:\"off\"})]}),Object(j.jsx)(\"div\",{className:\"bg-white px-3 py-2\",children:Object(j.jsx)(O.a,{block:!0,className:\"mt-3\",children:\"Save\"})})]})})]})}}]),a}(s.a.Component),Y=a(101),Q=a.n(Y),z={init:function(){var e=JSON.parse(localStorage.getItem(\"user\"));J.a.defaults.headers.common.Authorization=null!==e?e.token:\"\"},login:function(e){localStorage.setItem(\"user\",JSON.stringify(e)),J.a.defaults.headers.common.Authorization=e.token},logout:function(){delete J.a.defaults.headers.common.Authorization,localStorage.removeItem(\"user\")},auth:function(){return null!==localStorage.getItem(\"user\")},guest:function(){return null===localStorage.getItem(\"user\")},getToken:function(){var e=JSON.parse(localStorage.getItem(\"user\"));return null!==e?e.token:\"\"},setUser:function(e){var t=JSON.parse(localStorage.getItem(\"user\"));e.token=t.token,localStorage.setItem(\"user\",JSON.stringify(e))}},W=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={contacts:[],contact:{},userProfile:!1,profile:!1,connected:!1,messages:[],typing:!1,timeout:null,user:null,callState:\"idle\",incomingCallModal:!1,callerInfo:null,localStream:null,remoteStream:null,peerConnection:null,pendingOffer:null},e.initSocketConnection=function(){var t=Q()(\"ws://localhost:3001\",{query:\"token=\"+z.getToken()});t.on(\"connect\",(function(){console.log(\"[CHAT] Socket connected\"),e.setState({connected:!0})})),t.on(\"disconnect\",(function(){console.log(\"[CHAT] Socket disconnected\"),e.setState({connected:!1})})),t.on(\"data\",e.onData),t.on(\"message\",e.onNewMessage),t.on(\"user_status\",e.updateUsersState),t.on(\"typing\",e.onTypingMessage),t.on(\"error\",e.onSocketError),t.on(\"incomingCall\",(function(t){console.log(\"[CHAT] Incoming call from:\",t),e.setState({callState:\"receiving\",incomingCallModal:!0,callerInfo:t}),e.state.contact.id&&e.state.contact.id===t.from||e.setState({contact:Object(m.a)(Object(m.a)({},e.state.contact),{},{id:t.from,name:t.callerName})})})),t.on(\"offer\",(function(t){var a=t.sdp,n=t.caller;console.log(\"[CHAT] Received offer from:\",n),e.state.peerConnection?e.handleOffer(a,n):(console.log(\"[CHAT] No peerConnection yet. Storing pendingOffer...\"),e.setState({pendingOffer:{sdp:a,caller:n}}))})),t.on(\"answer\",(function(t){var a=t.sdp,n=t.callee;if(console.log(\"[CHAT] Received answer from:\",n),e.state.peerConnection){var s=new RTCSessionDescription(a);e.state.peerConnection.setRemoteDescription(s).then((function(){console.log(\"[CHAT] Remote description set for answer, callState = inCall\"),e.setState({callState:\"inCall\"})})).catch((function(e){return console.error(\"[CHAT] Error setting remote desc (answer)\",e)}))}})),t.on(\"iceCandidate\",(function(t){var a=t.candidate,n=t.from;console.log(\"[CHAT] Received ICE candidate from:\",n),e.state.peerConnection&&a&&e.state.peerConnection.addIceCandidate(new RTCIceCandidate(a)).catch((function(e){return console.error(\"[CHAT] Error adding ICE candidate\",e)}))})),t.on(\"hangUp\",(function(){console.log(\"[CHAT] Call ended by remote\"),e.endCall()})),e.setState({socket:t})},e.handleOffer=function(t,a){console.log(\"[CHAT] handleOffer => Setting remote desc & creating answer...\");var n=new RTCSessionDescription(t);e.state.peerConnection.setRemoteDescription(n).then((function(){return console.log(\"[CHAT] Remote description set (offer). Creating answer...\"),e.state.peerConnection.createAnswer()})).then((function(t){console.log(\"[CHAT] Created answer, setting local desc and sending...\"),e.state.peerConnection.setLocalDescription(t),e.state.socket.emit(\"answer\",{sdp:t,target:a}),e.setState({callState:\"inCall\"})})).catch((function(e){return console.error(\"[CHAT] Error handling offer->answer\",e)}))},e.initiateCall=function(t){var a;t.id&&(console.log(\"[CHAT] Initiating call with contact:\",t.id),e.setState({callState:\"calling\",contact:t}),e.state.socket.emit(\"callUser\",{recipientId:t.id,callerName:(null===(a=e.state.user)||void 0===a?void 0:a.username)||\"Unknown Caller\"}),navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(a){console.log(\"[CHAT] Got localStream, tracks:\",a.getAudioTracks()),e.setState({localStream:a});var n=e.createPeerConnection();a.getTracks().forEach((function(e){console.log(\"[CHAT] Adding local track:\",e.label),n.addTrack(e,a)})),n.createOffer().then((function(a){console.log(\"[CHAT] Created offer, setting local desc\"),n.setLocalDescription(a),console.log(\"[CHAT] Sending offer to server...\"),e.state.socket.emit(\"offer\",{sdp:a,target:t.id})})).catch((function(e){return console.error(\"[CHAT] Offer creation error\",e)})),e.setState({peerConnection:n})})).catch((function(e){return console.error(\"[CHAT] getUserMedia error\",e)})))},e.acceptCall=function(){var t;console.log(\"[CHAT] Accepting call from:\",e.state.callerInfo),e.setState({incomingCallModal:!1,callState:\"inCall\"});var a=null===(t=e.state.callerInfo)||void 0===t?void 0:t.from;!a||e.state.contact.id&&e.state.contact.id===a||e.setState({contact:Object(m.a)(Object(m.a)({},e.state.contact),{},{id:a,name:e.state.callerInfo.callerName})}),navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){console.log(\"[CHAT] Got localStream (callee), tracks:\",t.getAudioTracks()),e.setState({localStream:t});var a=e.createPeerConnection();t.getTracks().forEach((function(e){console.log(\"[CHAT] Callee adding local track:\",e.label),a.addTrack(e,t)})),e.setState({peerConnection:a},(function(){if(e.state.pendingOffer){var t=e.state.pendingOffer,a=t.sdp,n=t.caller;e.handleOffer(a,n),e.setState({pendingOffer:null})}}))})).catch((function(e){return console.error(\"[CHAT] Error accessing mic (callee)\",e)}))},e.rejectCall=function(){console.log(\"[CHAT] Rejecting call from:\",e.state.callerInfo),e.setState({incomingCallModal:!1,callState:\"idle\",callerInfo:null,pendingOffer:null})},e.createPeerConnection=function(){console.log(\"[CHAT] Creating RTCPeerConnection...\");var t=new RTCPeerConnection({iceServers:[{urls:\"stun:stun1.l.google.com:19302\"}]});return t.onicecandidate=function(t){if(t.candidate){var a=e.state.contact.id||e.state.callerInfo&&e.state.callerInfo.from;console.log(\"[CHAT] Sending ICE candidate to:\",a),e.state.socket.emit(\"iceCandidate\",{candidate:t.candidate,target:a})}else console.log(\"[CHAT] ICE gathering complete (no more candidates)\")},t.ontrack=function(t){console.log(\"[CHAT] ontrack => remote track label:\",t.track.label),e.setState({remoteStream:t.streams[0]})},t.onconnectionstatechange=function(){var a=t.connectionState;console.log(\"[CHAT] PeerConnection state:\",a),\"disconnected\"!==a&&\"failed\"!==a&&\"closed\"!==a||(console.log(\"[CHAT] PeerConnection ended, calling endCall()\"),e.endCall())},t},e.endCall=function(){console.log(\"[CHAT] endCall invoked\");var t=e.state,a=t.socket,n=t.contact,s=t.callerInfo,c=t.peerConnection,o=t.localStream,r=t.callState,i=n.id||s&&s.from;\"calling\"!==r&&\"inCall\"!==r||(console.log(\"[CHAT] Emitting hangUp to target:\",i),a.emit(\"hangUp\",{target:i})),c&&(console.log(\"[CHAT] Closing peerConnection...\"),c.close()),o&&(console.log(\"[CHAT] Stopping localStream tracks\"),o.getTracks().forEach((function(e){return e.stop()}))),e.setState({callState:\"idle\",peerConnection:null,localStream:null,remoteStream:null,callerInfo:null,incomingCallModal:!1,pendingOffer:null})},e.onData=function(t,a,n,s){console.log(\"[CHAT] onData => user:\",t,\" contacts:\",a.length);var c=a[0]||{};e.setState({messages:n,contacts:a,user:t,contact:c},(function(){e.updateUsersState(s)}))},e.onNewMessage=function(t){t.sender===e.state.contact.id&&(e.setState({typing:!1}),e.state.socket.emit(\"seen\",e.state.contact.id),t.seen=!0);var a=e.state.messages.concat(t);e.setState({messages:a})},e.onTypingMessage=function(t){if(e.state.contact.id===t){e.setState({typing:t}),clearTimeout(e.state.timeout);var a=setTimeout((function(){return e.setState({typing:!1})}),3e3);e.setState({timeout:a})}},e.onSocketError=function(t){console.error(\"[CHAT] Socket error:\",t),\"auth_error\"===t&&(z.logout(),e.props.history.push(\"/login\"))},e.updateUsersState=function(t){var a=e.state.contacts;a.forEach((function(e,n){t[e.id]&&(a[n].status=t[e.id])})),e.setState({contacts:a});var n=e.state.contact;t[n.id]&&(n.status=t[n.id]),e.setState({contact:n})},e.sendMessage=function(t){if(e.state.contact.id){t.receiver=e.state.contact.id;var a=e.state.messages.concat(t);e.setState({messages:a}),e.state.socket.emit(\"message\",t)}},e.sendType=function(){e.state.contact.id&&e.state.socket.emit(\"typing\",e.state.contact.id)},e.logout=function(){console.log(\"[CHAT] Logging out user\"),e.state.socket.disconnect(),z.logout(),e.props.history.push(\"/\")},e.renderChat=function(){var t=e.state,a=t.contact,n=t.user,s=t.messages;if(!a||!a.id)return null;var c=s.filter((function(e){return e.sender===a.id||e.receiver===a.id}));return Object(j.jsx)(L,{user:n,messages:c})},e.onChatNavigate=function(t){console.log(\"[CHAT] onChatNavigate => switching to contact:\",t.id),e.setState({contact:t}),e.state.socket.emit(\"seen\",t.id);var a=e.state.messages.map((function(e){return e.sender===t.id?Object(m.a)(Object(m.a)({},e),{},{seen:!0}):e}));e.setState({messages:a})},e.userProfileToggle=function(){return e.setState({userProfile:!e.state.userProfile})},e.profileToggle=function(){return e.setState({profile:!e.state.profile})},e}return Object(i.a)(a,[{key:\"componentDidMount\",value:function(){this.initSocketConnection()}},{key:\"render\",value:function(){var e=this;return this.state.connected&&this.state.contacts&&this.state.messages?Object(j.jsxs)(b.a,{className:\"h-100\",children:[Object(j.jsxs)(\"div\",{id:\"contacts-section\",className:\"col-6 col-md-4\",children:[Object(j.jsx)(A,{user:this.state.user,toggle:this.profileToggle}),Object(j.jsx)(M,{contacts:this.state.contacts,messages:this.state.messages,onChatNavigate:this.onChatNavigate}),Object(j.jsx)(Z,{contact:this.state.contact,toggle:this.userProfileToggle,open:this.state.userProfile}),Object(j.jsx)(K,{user:this.state.user,toggle:this.profileToggle,open:this.state.profile})]}),Object(j.jsxs)(\"div\",{id:\"messages-section\",className:\"col-6 col-md-8\",children:[Object(j.jsx)(G,{contact:this.state.contact,typing:this.state.typing,toggle:this.userProfileToggle,logout:this.logout,onCall:this.initiateCall}),this.renderChat(),Object(j.jsx)(V,{sender:this.sendMessage,sendType:this.sendType}),(\"calling\"===this.state.callState||\"inCall\"===this.state.callState)&&Object(j.jsx)(O.a,{color:\"danger\",onClick:this.endCall,className:\"mt-2\",children:\"Hang Up\"}),this.state.remoteStream&&Object(j.jsx)(\"audio\",{ref:function(t){t&&e.state.remoteStream&&(console.log(\"[CHAT] Attaching remoteStream to audio element\"),t.srcObject=e.state.remoteStream)},autoPlay:!0})]}),Object(j.jsxs)(C.a,{isOpen:this.state.incomingCallModal,children:[Object(j.jsx)(v.a,{children:\"Incoming Call\"}),Object(j.jsx)(x.a,{children:this.state.callerInfo&&Object(j.jsxs)(\"p\",{children:[this.state.callerInfo.callerName,\" is calling...\"]})}),Object(j.jsxs)(S.a,{children:[Object(j.jsx)(O.a,{color:\"success\",onClick:this.acceptCall,children:\"Accept\"}),Object(j.jsx)(O.a,{color:\"secondary\",onClick:this.rejectCall,children:\"Reject\"})]})]})]}):Object(j.jsx)(p.a,{id:\"loader\",color:\"success\"})}}]),a}(s.a.Component),_=function(e){return Object(j.jsx)(\"h3\",{children:\"The requested page was not found\"})},$=(a(96),a.p+\"static/media/logo.2e5b0bba.png\"),ee=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={name:\"\",username:\"\",password:\"\",error:\"\"},e.onChange=function(t){return e.setState({[t.target.name]:t.target.value,error:null})},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name,username:e.state.username,password:e.state.password};J.a.post(\"/api/auth/register\",a).then((function(t){z.login(t.data),e.props.history.push(\"/\")})).catch((function(t){return e.setState({error:t.response.data.message})}))},e}return Object(i.a)(a,[{key:\"render\",value:function(){return Object(j.jsx)(\"div\",{className:\"auth-container\",children:Object(j.jsxs)(F.a,{onSubmit:this.onSubmit,children:[Object(j.jsx)(\"img\",{src:$,alt:\"Logo\"}),Object(j.jsx)(\"h5\",{className:\"auth-header\",children:\"Create a New Account\"}),Object(j.jsx)(k,{error:this.state.error}),Object(j.jsx)(D.a,{className:\"auth-form-control\",value:this.state.name,name:\"name\",onChange:this.onChange,placeholder:\"Name\",required:!0}),Object(j.jsx)(D.a,{className:\"auth-form-control\",value:this.state.username,name:\"username\",onChange:this.onChange,placeholder:\"Username\",required:!0}),Object(j.jsx)(D.a,{type:\"password\",className:\"auth-form-control\",value:this.state.password,name:\"password\",onChange:this.onChange,placeholder:\"Password\",required:!0}),Object(j.jsx)(O.a,{className:\"auth-button\",block:!0,children:\"Create\"}),Object(j.jsx)(\"small\",{className:\"auth-footer\",children:Object(j.jsx)(u.b,{to:\"/login\",children:\"Login\"})}),Object(j.jsxs)(\"p\",{className:\"auth-footer\",children:[\"\\xa9 \",(new Date).getFullYear()]})]})})}}]),a}(s.a.Component),te=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={username:\"\",password:\"\",error:\"\"},e.onChange=function(t){return e.setState({[t.target.name]:t.target.value,error:null})},e.onSubmit=function(t){t.preventDefault();var a={username:e.state.username,password:e.state.password};J.a.post(\"/api/auth\",a).then((function(t){z.login(t.data),e.props.history.push(\"/\")})).catch((function(t){return e.setState({error:t.response.data.message})}))},e}return Object(i.a)(a,[{key:\"render\",value:function(){return Object(j.jsx)(\"div\",{className:\"auth-container\",children:Object(j.jsxs)(F.a,{onSubmit:this.onSubmit,children:[Object(j.jsx)(\"img\",{src:$,alt:\"Logo\"}),Object(j.jsx)(\"h5\",{className:\"auth-header\",children:\"Login\"}),Object(j.jsx)(k,{error:this.state.error}),Object(j.jsx)(D.a,{className:\"auth-form-control\",value:this.state.username,name:\"username\",onChange:this.onChange,placeholder:\"Username\",required:!0}),Object(j.jsx)(D.a,{type:\"password\",className:\"auth-form-control\",value:this.state.password,name:\"password\",onChange:this.onChange,placeholder:\"Password\",required:!0}),Object(j.jsx)(O.a,{className:\"auth-button\",block:!0,children:\"Login\"}),Object(j.jsx)(\"small\",{className:\"auth-footer\",children:Object(j.jsx)(u.b,{to:\"/register\",children:\"Create a new account\"})}),Object(j.jsxs)(\"p\",{className:\"auth-footer\",children:[\"\\xa9 \",(new Date).getFullYear()]})]})})}}]),a}(s.a.Component),ae=a(193),ne=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={password:\"\",newPassword:\"\"},e.onChange=function(t){return e.setState({[t.target.name]:t.target.value,error:null})},e.onSubmit=function(t){t.preventDefault();var a={password:e.state.password,newPassword:e.state.newPassword};J.a.post(\"/api/account/password\",a).then((function(t){e.props.history.push(\"/\")})).catch((function(t){e.setState({error:t.response.data.message})}))},e}return Object(i.a)(a,[{key:\"render\",value:function(){return Object(j.jsx)(ae.a,{className:\"auth col-lg-3 col-sm-6\",children:Object(j.jsxs)(F.a,{onSubmit:this.onSubmit,children:[Object(j.jsx)(\"img\",{src:$,alt:\"\",width:\"200\"}),Object(j.jsx)(\"h5\",{className:\"mb-4\",children:\"Change Password\"}),Object(j.jsx)(k,{error:this.state.error}),Object(j.jsx)(D.a,{type:\"password\",value:this.state.password,name:\"password\",onChange:this.onChange,placeholder:\"Current Password\",required:!0}),Object(j.jsx)(D.a,{type:\"password\",value:this.state.newPassword,name:\"newPassword\",onChange:this.onChange,placeholder:\"New Password\",required:!0}),Object(j.jsx)(O.a,{block:!0,className:\"mb-3\",children:\"Change\"}),Object(j.jsx)(\"small\",{children:Object(j.jsx)(u.b,{to:\"/\",children:\"Back\"})}),Object(j.jsxs)(\"p\",{className:\"m-3 mb-3 text-muted\",children:[\"\\xa9 \",(new Date).getFullYear()]})]})})}}]),a}(s.a.Component),se=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),n=t.call(this,e),z.init(),n}return Object(i.a)(a,[{key:\"render\",value:function(){return Object(j.jsx)(\"div\",{id:\"main-container\",className:\"container-fluid\",children:Object(j.jsx)(u.a,{children:Object(j.jsxs)(h.d,{children:[Object(j.jsx)(f,{path:\"/\",exact:!0,component:W,can:z.auth,redirect:\"/login\"}),Object(j.jsx)(f,{path:\"/password\",component:ne,can:z.auth,redirect:\"/login\"}),Object(j.jsx)(f,{path:\"/password\",component:ne,can:z.auth,redirect:\"/login\"}),Object(j.jsx)(f,{path:\"/register\",component:ee,can:z.guest,redirect:\"/\"}),Object(j.jsx)(f,{path:\"/Login\",component:te,can:z.guest,redirect:\"/\"}),Object(j.jsx)(f,{component:_})]})})})}}]),a}(n.Component);Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(j.jsx)(se,{}),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},96:function(e,t,a){}},[[182,1,2]]]);","name":"static/js/main.ca8f67a8.chunk.js","map":{"version":3,"sources":["static/js/main.ca8f67a8.chunk.js"],"names":["this","push","107","module","exports","__webpack_require__","182","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","classCallCheck","createClass","inherits","createSuper","react_router_dom","react_router","objectSpread2","objectWithoutProperties","jsx_runtime","src_AppRoute","_ref","Component","component","_ref$can","can","redirect","rest","Object","render","props","to","Spinner","Row","Button","Modal","ModalHeader","ModalBody","ModalFooter","Alert","components_Error","error","color","children","components_Avatar","src","concat","file","className","alt","chat_ContactHeader","_props$user","user","avatar","onClick","toggle","assertThisInitialized","moment","moment_default","Badge","chat_Contact","contact","status","name","message","content","date","format","unseen","Input","chat_Contacts","_React$Component","Contacts","_super","_this","_len","arguments","length","args","Array","_key","call","apply","state","search","onSearch","e","setState","target","value","renderContact","index","includes","messages","filter","sender","id","receiver","lastMessage","seen","onChatNavigate","bind","key","_this2","onChange","placeholder","contacts","map","a","UncontrolledDropdown","DropdownToggle","DropdownMenu","DropdownItem","chat_ChatHeader","_props$contact","_props$contact2","style","padding","justifyContent","cursor","typing","fromNow","marginLeft","console","log","onCall","tag","history","divider","logout","chat_Message","outgoing","chat_Messages","Messages","renderMessage","chat_MessageForm","MessageForm","lastType","onSend","Date","getTime","onKeyDown","shiftKey","sendType","preventDefault","type","rows","side_UserProfile","open","about","Form","axios","axios_default","side_EditProfile","EditProfile","showFileUpload","fileUpload","current","click","onImageChange","files","image","URL","createObjectURL","[object Object]","onSubmit","data","FormData","append","post","then","catch","err","_err$response","_err$response$data","response","onClose","_user","createRef","_this$props$user","overflow","ref","required","autoComplete","block","build","build_default","src_Auth","init","JSON","parse","localStorage","getItem","defaults","headers","common","token","login","setItem","stringify","removeItem","auth","guest","getToken","setUser","newProfile","views_Chat","Chat","userProfile","profile","connected","timeout","callState","incomingCallModal","callerInfo","localStream","remoteStream","peerConnection","pendingOffer","initSocketConnection","socket","query","on","onData","onNewMessage","updateUsersState","onTypingMessage","onSocketError","from","callerName","sdp","caller","handleOffer","_ref2","callee","desc","RTCSessionDescription","setRemoteDescription","_ref3","candidate","addIceCandidate","RTCIceCandidate","endCall","createAnswer","answer","setLocalDescription","emit","initiateCall","_this$state$user","recipientId","username","navigator","mediaDevices","getUserMedia","audio","video","stream","getAudioTracks","createPeerConnection","getTracks","forEach","track","label","addTrack","createOffer","offer","acceptCall","_this$state$callerInf","callerId","_this$state$pendingOf","rejectCall","RTCPeerConnection","iceServers","urls","onicecandidate","event","targetId","ontrack","streams","onconnectionstatechange","connectionState","_this$state","close","stop","users","newMessages","clearTimeout","setTimeout","element","sendMessage","disconnect","renderChat","_this$state2","filtered","m","userProfileToggle","profileToggle","audioEl","srcObject","autoPlay","isOpen","views_NotFound","logo","p","views_Register","Register","password","res","getFullYear","views_Login","Login","Card","views_Password","Password","newPassword","width","src_App","_Component","App","path","exact","Boolean","window","location","hostname","match","document","getElementById","serviceWorker","ready","registration","unregister","96"],"mappings":"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"},"input":"(this[\"webpackJsonpclient\"] = this[\"webpackJsonpclient\"] || []).push([[0],{\n\n/***/ 107:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 182:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(2);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(32);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src_0 = __webpack_require__(107);\n\n// EXTERNAL MODULE: ./node_modules/bootstrap/dist/css/bootstrap.min.css\nvar bootstrap_min = __webpack_require__(108);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(13);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js + 1 modules\nvar inherits = __webpack_require__(15);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 4 modules\nvar createSuper = __webpack_require__(14);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js + 1 modules\nvar objectSpread2 = __webpack_require__(22);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js + 1 modules\nvar objectWithoutProperties = __webpack_require__(102);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(1);\n\n// CONCATENATED MODULE: ./src/AppRoute.js\n/**\r\n *  AppRoute Component.\r\n * @param Component\r\n * @param can\r\n * @param redirect\r\n * @param rest\r\n */var AppRoute_AppRoute=function AppRoute(_ref){var Component=_ref.component,_ref$can=_ref.can,can=_ref$can===void 0?function(){return true;}:_ref$can,redirect=_ref.redirect,rest=Object(objectWithoutProperties[\"a\" /* default */])(_ref,[\"component\",\"can\",\"redirect\"]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},rest),{},{render:function render(props){return can()?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Component,Object(objectSpread2[\"a\" /* default */])({},props)):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Redirect */],{to:redirect});}}));};/* harmony default export */ var src_AppRoute = (AppRoute_AppRoute);\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/Spinner.js\nvar Spinner = __webpack_require__(189);\n\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/Row.js\nvar Row = __webpack_require__(184);\n\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/Button.js\nvar Button = __webpack_require__(98);\n\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/Modal.js + 1 modules\nvar Modal = __webpack_require__(197);\n\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/ModalHeader.js\nvar ModalHeader = __webpack_require__(190);\n\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/ModalBody.js\nvar ModalBody = __webpack_require__(191);\n\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/ModalFooter.js\nvar ModalFooter = __webpack_require__(192);\n\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/Alert.js\nvar Alert = __webpack_require__(183);\n\n// CONCATENATED MODULE: ./src/components/Error.js\n/**\n * Error Component.\n * @param props\n */var Error_Error=function Error(props){return props.error?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Alert[\"a\" /* default */],{color:\"danger\",children:props.error}):'';};/* harmony default export */ var components_Error = (Error_Error);\n// CONCATENATED MODULE: ./src/assets/avatar.png\n/* harmony default export */ var avatar = (\"data:image/png;base64,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\");\n// CONCATENATED MODULE: ./src/components/Avatar.js\n/**\n * Avatar Component.\n * @param props\n */var Avatar_Avatar=function Avatar(props){var src=props.src?\"uploads/\".concat(props.src):avatar;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:props.file||src,className:\"img-fluid rounded-circle ml-3 avatar\",alt:\"\"});};/* harmony default export */ var components_Avatar = (Avatar_Avatar);\n// CONCATENATED MODULE: ./src/components/chat/ContactHeader.js\n/**\n * Contacts Header.\n */var ContactHeader_ContactHeader=function ContactHeader(props){var _props$user;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Row[\"a\" /* default */],{className:\"heading\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Avatar,{src:(_props$user=props.user)===null||_props$user===void 0?void 0:_props$user.avatar}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:\"Contacts\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"mr-auto nav-link\",onClick:props.toggle,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"fa fa-bars\"})})]});};/* harmony default export */ var chat_ContactHeader = (ContactHeader_ContactHeader);\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\nvar assertThisInitialized = __webpack_require__(43);\n\n// EXTERNAL MODULE: ./node_modules/moment/moment.js\nvar moment = __webpack_require__(30);\nvar moment_default = /*#__PURE__*/__webpack_require__.n(moment);\n\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/Badge.js\nvar Badge = __webpack_require__(185);\n\n// CONCATENATED MODULE: ./src/components/chat/Contact.js\n/**\n * Contact Item.\n */var Contact_Contact=function Contact(props){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"contact\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Avatar,{src:props.contact.avatar}),props.contact.status===true?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"fa fa-circle online\"}):'']}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"w-50\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"name\",children:props.contact.name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"small last-message\",children:props.message?props.message.content:'Click here to start the conversation'})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"flex-grow-1 text-left\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"small text-muted\",children:props.message?moment_default()(props.message.date).format(\"hh:mm a\"):''}),props.unseen>0?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Badge[\"a\" /* default */],{color:\"success\",children:props.unseen}):'']})]});};/* harmony default export */ var chat_Contact = (Contact_Contact);\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/Input.js\nvar Input = __webpack_require__(186);\n\n// CONCATENATED MODULE: ./src/components/chat/Contacts.js\n/**\n * Contacts.\n */var Contacts_Contacts=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(Contacts,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(Contacts);function Contacts(){var _this;Object(classCallCheck[\"a\" /* default */])(this,Contacts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={search:''};_this.onSearch=function(e){return _this.setState({search:e.target.value});};_this.renderContact=function(contact,index){if(!contact.name.includes(_this.state.search))return;var messages=_this.props.messages.filter(function(e){return e.sender===contact.id||e.receiver===contact.id;});var lastMessage=messages[messages.length-1];var unseen=messages.filter(function(e){return!e.seen&&e.sender===contact.id;}).length;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"w-100\",onClick:_this.props.onChatNavigate.bind(Object(assertThisInitialized[\"a\" /* default */])(_this),contact),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chat_Contact,{contact:contact,message:lastMessage,unseen:unseen})},index);};return _this;}Object(createClass[\"a\" /* default */])(Contacts,[{key:\"render\",value:/**\n     * Render component.\n     */function render(){var _this2=this;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"list\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Row[\"a\" /* default */],{className:\"search\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{onChange:this.onSearch,placeholder:\"Search\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Row[\"a\" /* default */],{id:\"contacts\",children:this.props.contacts.map(function(contact,index){return _this2.renderContact(contact,index);})})]});}/**\n     * Render single contact.\n     * @param contact\n     * @param index\n     */}]);return Contacts;}(react_default.a.Component);/* harmony default export */ var chat_Contacts = (Contacts_Contacts);\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/UncontrolledDropdown.js + 1 modules\nvar UncontrolledDropdown = __webpack_require__(194);\n\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/DropdownToggle.js + 1 modules\nvar DropdownToggle = __webpack_require__(195);\n\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/DropdownMenu.js + 1 modules\nvar DropdownMenu = __webpack_require__(196);\n\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/DropdownItem.js\nvar DropdownItem = __webpack_require__(187);\n\n// CONCATENATED MODULE: ./src/components/chat/ChatHeader.js\n/**\n * Chat Header.\n */var ChatHeader_ChatHeader=function ChatHeader(props){var _props$contact,_props$contact2;var status=function status(){if(props.typing)return\"Typing now\";if(props.contact.status===true)return\"Online now\";if(props.contact.status)return moment_default()(props.contact.status).fromNow();return\"\";};var handleCall=function handleCall(){console.log(\"[ChatHeader] Call button clicked\");if(props.onCall){props.onCall(props.contact);}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Row[\"a\" /* default */],{className:\"heading m-0 align-items-center w-100\",style:{padding:\"0.5rem\",justifyContent:\"space-between\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex align-items-center\",onClick:props.toggle,style:{cursor:\"pointer\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Avatar,{src:(_props$contact=props.contact)===null||_props$contact===void 0?void 0:_props$contact.avatar}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"text-left ml-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:((_props$contact2=props.contact)===null||_props$contact2===void 0?void 0:_props$contact2.name)||\"\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"small\",{children:status()})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex align-items-center\",style:{marginLeft:\"0.5rem\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{color:\"success\",onClick:handleCall,className:\"mr-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"fa fa-phone\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(UncontrolledDropdown[\"a\" /* default */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DropdownToggle[\"a\" /* default */],{tag:\"a\",className:\"nav-link\",style:{cursor:\"pointer\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"fa fa-ellipsis-v\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(DropdownMenu[\"a\" /* default */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DropdownItem[\"a\" /* default */],{onClick:function onClick(){return props.history.push(\"/password\");},children:\"Change Password\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DropdownItem[\"a\" /* default */],{divider:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DropdownItem[\"a\" /* default */],{onClick:props.logout,children:\"Logout\"})]})]})]})]});};/* harmony default export */ var chat_ChatHeader = (Object(react_router[\"g\" /* withRouter */])(ChatHeader_ChatHeader));\n// CONCATENATED MODULE: ./src/components/chat/Message.js\n/**\n * Message item.\n */var Message_Message=function Message(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:props.message.outgoing?'message-item':'message-item incoming',children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"d-flex flex-row\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"body m-1 mr-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:props.message.content}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"small text-muted\",children:moment_default()(props.message.date).format(\"hh:mm a | MMM D\")})]})})});};/* harmony default export */ var chat_Message = (Message_Message);\n// CONCATENATED MODULE: ./src/components/chat/Messages.js\n/**\n * Messages List Component.\n */var Messages_Messages=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(Messages,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(Messages);function Messages(){var _this;Object(classCallCheck[\"a\" /* default */])(this,Messages);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.renderMessage=function(message,index){message.outgoing=message.receiver!==_this.props.user.id;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chat_Message,{message:message},index);};return _this;}Object(createClass[\"a\" /* default */])(Messages,[{key:\"render\",value:/**\n     * Render component.\n     */function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"messages\",children:this.props.messages.map(this.renderMessage)});}}]);return Messages;}(react_default.a.Component);/* harmony default export */ var chat_Messages = (Messages_Messages);\n// CONCATENATED MODULE: ./src/components/chat/MessageForm.js\n/**\n * MessageForm Component.\n */var MessageForm_MessageForm=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(MessageForm,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(MessageForm);function MessageForm(){var _this;Object(classCallCheck[\"a\" /* default */])(this,MessageForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={message:'',lastType:false};_this.onChange=function(e){return _this.setState({message:e.target.value});};_this.onSend=function(e){if(!_this.state.message)return;var message={content:_this.state.message,date:new Date().getTime()};_this.props.sender(message);_this.setState({message:''});};_this.onKeyDown=function(e){if(e.key==='Enter'&&!e.shiftKey){_this.setState({lastType:false});_this.onSend();e.preventDefault();}else if(!_this.state.lastType||moment_default()()-_this.state.lastType>2000){_this.setState({lastType:moment_default()()});_this.props.sendType();}};return _this;}Object(createClass[\"a\" /* default */])(MessageForm,[{key:\"render\",value:/**\n     * Render component.\n     */function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{id:\"send-message\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{type:\"textarea\",rows:\"1\",onChange:this.onChange,onKeyDown:this.onKeyDown,value:this.state.message,placeholder:\"Write your message here\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"fa fa-send text-muted px-3 send\",onClick:this.onSend})]});}}]);return MessageForm;}(react_default.a.Component);/* harmony default export */ var chat_MessageForm = (MessageForm_MessageForm);\n// CONCATENATED MODULE: ./src/components/side/UserProfile.js\n/**\n * UserProfile Component.\n */var UserProfile_UserProfile=function UserProfile(props){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:props.open?'side-profile open':'side-profile',children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Row[\"a\" /* default */],{className:\"heading\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"mr-2 nav-link\",onClick:props.toggle,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"fa fa-arrow-right\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:props.contact.name})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex flex-column overflow-auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Avatar,{src:props.contact.avatar}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"bg-white px-3 py-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{className:\"text-muted\",children:\"Status Message\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:props.contact.about?props.contact.about:'Hello, I am using chat me'})]})]})]});};/* harmony default export */ var side_UserProfile = (UserProfile_UserProfile);\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/Form.js\nvar Form = __webpack_require__(188);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(18);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// CONCATENATED MODULE: ./src/components/side/EditProfile.js\n/**\n * EditProfile Component.\n */var EditProfile_EditProfile=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(EditProfile,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(EditProfile);function EditProfile(props){var _this;Object(classCallCheck[\"a\" /* default */])(this,EditProfile);_this=_super.call(this,props);// Provide a safe fallback if props.user is null/undefined\n_this.showFileUpload=function(){return _this.fileUpload.current.click();};_this.onImageChange=function(e){if(e.target.files&&e.target.files[0]){_this.setState({image:URL.createObjectURL(e.target.files[0]),avatar:e.target.files[0]});}};_this.onChange=function(e){return _this.setState({[e.target.name]:e.target.value,error:null});};_this.onSubmit=function(e){e.preventDefault();var data=new FormData();data.append(\"name\",_this.state.name);data.append(\"about\",_this.state.about);if(_this.state.avatar){data.append(\"avatar\",_this.state.avatar,_this.state.avatar.name);}axios_default.a.post(\"/api/account\",data).then(_this.props.toggle).catch(function(err){var _err$response,_err$response$data;_this.setState({error:((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"An error occurred.\"});});};_this.onClose=function(){// If props.user might still be null, handle that safely:\nvar user=_this.props.user||{};_this.setState({image:null,avatar:null,name:user.name||\"\",about:user.about||\"\"});_this.props.toggle();};var _user=props.user||{};_this.state={name:_user.name||\"\",about:_user.about||\"\",image:null,avatar:null,error:null};_this.fileUpload=/*#__PURE__*/react_default.a.createRef();return _this;}/**\n   * Trigger click on file upload input.\n   */Object(createClass[\"a\" /* default */])(EditProfile,[{key:\"render\",value:/**\n   * Render component.\n   */function render(){var _this$props$user;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:this.props.open?\"side-profile open\":\"side-profile\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Row[\"a\" /* default */],{className:\"heading\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"mr-2 nav-link\",onClick:this.onClose,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"fa fa-arrow-right\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:\"Profile\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"d-flex flex-column\",style:{overflow:\"auto\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */],{onSubmit:this.onSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Error,{error:this.state.error}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"text-center\",onClick:this.showFileUpload,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Avatar// If props.user might be null, use optional chaining here:\n,{src:(_this$props$user=this.props.user)===null||_this$props$user===void 0?void 0:_this$props$user.avatar,file:this.state.image})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"file\",ref:this.fileUpload,onChange:this.onImageChange,className:\"d-none\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"bg-white px-4 py-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{className:\"text-muted\",children:\"Name\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{value:this.state.name,name:\"name\",onChange:this.onChange,required:true,autoComplete:\"off\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"bg-white px-3 py-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{className:\"text-muted\",children:\"Status Message\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{value:this.state.about,name:\"about\",onChange:this.onChange,required:true,autoComplete:\"off\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"bg-white px-3 py-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{block:true,className:\"mt-3\",children:\"Save\"})})]})})]});}}]);return EditProfile;}(react_default.a.Component);/* harmony default export */ var side_EditProfile = (EditProfile_EditProfile);\n// CONCATENATED MODULE: ./src/components/index.js\n/**\n * Export Components.\n */\n// EXTERNAL MODULE: ./node_modules/socket.io-client/build/index.js\nvar build = __webpack_require__(101);\nvar build_default = /*#__PURE__*/__webpack_require__.n(build);\n\n// CONCATENATED MODULE: ./src/Auth.js\nvar Auth={/**\r\n     * Initialize axios headers.\r\n     */init:function init(){var user=JSON.parse(localStorage.getItem('user'));axios_default.a.defaults.headers.common['Authorization']=user!==null?user.token:'';},/**\r\n     * Store user data after login.\r\n     * @param user\r\n     */login:function login(user){localStorage.setItem('user',JSON.stringify(user));axios_default.a.defaults.headers.common['Authorization']=user.token;},/**\r\n     * Delete user data.\r\n     */logout:function logout(){delete axios_default.a.defaults.headers.common['Authorization'];localStorage.removeItem('user');},/**\r\n     * Is user authenticated.\r\n     * @returns {boolean}\r\n     */auth:function auth(){return localStorage.getItem('user')!==null;},/**\r\n     * Is guest.\r\n     * @returns {boolean}\r\n     */guest:function guest(){return localStorage.getItem('user')===null;},/**\r\n     * Get user token.\r\n     * @returns {string}\r\n     */getToken:function getToken(){var user=JSON.parse(localStorage.getItem('user'));return user!==null?user.token:'';},/**\r\n     * Set user\r\n     * @param newProfile\r\n     */setUser:function setUser(newProfile){var user=JSON.parse(localStorage.getItem('user'));newProfile.token=user.token;localStorage.setItem('user',JSON.stringify(newProfile));}};/* harmony default export */ var src_Auth = (Auth);\n// CONCATENATED MODULE: ./src/views/Chat.js\n/**\n * web/src/views/Chat.js\n */var Chat_Chat=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(Chat,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(Chat);function Chat(){var _this;Object(classCallCheck[\"a\" /* default */])(this,Chat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={contacts:[],contact:{},// Will hold { id, name, ... } of the current chat\nuserProfile:false,profile:false,// Existing message-related states\nconnected:false,messages:[],typing:false,timeout:null,user:null,// ------ CALL STATES ------\ncallState:'idle',// 'idle' | 'calling' | 'receiving' | 'inCall'\nincomingCallModal:false,callerInfo:null,// Will hold { from, callerName }\n// WebRTC\nlocalStream:null,remoteStream:null,peerConnection:null,// NEW: Store an SDP offer if it arrives before we have a peerConnection.\npendingOffer:null};_this.initSocketConnection=function(){var socket=build_default()(\"ws://localhost:3001\",{query:'token='+src_Auth.getToken()});// --- Existing events ---\nsocket.on('connect',function(){console.log('[CHAT] Socket connected');_this.setState({connected:true});});socket.on('disconnect',function(){console.log('[CHAT] Socket disconnected');_this.setState({connected:false});});socket.on('data',_this.onData);socket.on('message',_this.onNewMessage);socket.on('user_status',_this.updateUsersState);socket.on('typing',_this.onTypingMessage);socket.on('error',_this.onSocketError);// ---------------- NEW: CALL EVENTS ----------------\nsocket.on('incomingCall',function(data){// data => { from: userId, callerName: ... }\nconsole.log('[CHAT] Incoming call from:',data);_this.setState({callState:'receiving',incomingCallModal:true,callerInfo:data// store who is calling\n});// OPTIONAL: Update contact so we know who we're talking to\nif(!_this.state.contact.id||_this.state.contact.id!==data.from){_this.setState({contact:Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},_this.state.contact),{},{id:data.from,name:data.callerName})});}});// --- IMPORTANT CHANGE HERE: Store or handle the offer ---\nsocket.on('offer',function(_ref){var sdp=_ref.sdp,caller=_ref.caller;console.log('[CHAT] Received offer from:',caller);// If we already have a peerConnection, handle it right away.\nif(_this.state.peerConnection){_this.handleOffer(sdp,caller);}else{// We haven't accepted the call yet => store it in state until we create peerConnection\nconsole.log('[CHAT] No peerConnection yet. Storing pendingOffer...');_this.setState({pendingOffer:{sdp:sdp,caller:caller}});}});socket.on('answer',function(_ref2){var sdp=_ref2.sdp,callee=_ref2.callee;console.log('[CHAT] Received answer from:',callee);if(_this.state.peerConnection){var desc=new RTCSessionDescription(sdp);_this.state.peerConnection.setRemoteDescription(desc).then(function(){console.log('[CHAT] Remote description set for answer, callState = inCall');_this.setState({callState:'inCall'});}).catch(function(err){return console.error('[CHAT] Error setting remote desc (answer)',err);});}});socket.on('iceCandidate',function(_ref3){var candidate=_ref3.candidate,from=_ref3.from;console.log('[CHAT] Received ICE candidate from:',from);if(_this.state.peerConnection&&candidate){_this.state.peerConnection.addIceCandidate(new RTCIceCandidate(candidate)).catch(function(e){return console.error('[CHAT] Error adding ICE candidate',e);});}});socket.on('hangUp',function(){console.log('[CHAT] Call ended by remote');_this.endCall();});_this.setState({socket:socket});};_this.handleOffer=function(sdp,caller){console.log('[CHAT] handleOffer => Setting remote desc & creating answer...');var desc=new RTCSessionDescription(sdp);_this.state.peerConnection.setRemoteDescription(desc).then(function(){console.log('[CHAT] Remote description set (offer). Creating answer...');return _this.state.peerConnection.createAnswer();}).then(function(answer){console.log('[CHAT] Created answer, setting local desc and sending...');_this.state.peerConnection.setLocalDescription(answer);_this.state.socket.emit('answer',{sdp:answer,target:caller});_this.setState({callState:'inCall'});}).catch(function(err){return console.error('[CHAT] Error handling offer->answer',err);});};_this.initiateCall=function(contact){var _this$state$user;if(!contact.id)return;console.log('[CHAT] Initiating call with contact:',contact.id);_this.setState({callState:'calling',contact:contact});// Notify the callee that we're calling\n_this.state.socket.emit('callUser',{recipientId:contact.id,callerName:((_this$state$user=_this.state.user)===null||_this$state$user===void 0?void 0:_this$state$user.username)||'Unknown Caller'});// Access microphone (audio only)\nnavigator.mediaDevices.getUserMedia({audio:true,video:false}).then(function(stream){console.log('[CHAT] Got localStream, tracks:',stream.getAudioTracks());_this.setState({localStream:stream});var peerConnection=_this.createPeerConnection();// Add local tracks\nstream.getTracks().forEach(function(track){console.log('[CHAT] Adding local track:',track.label);peerConnection.addTrack(track,stream);});// Create offer\npeerConnection.createOffer().then(function(offer){console.log('[CHAT] Created offer, setting local desc');peerConnection.setLocalDescription(offer);console.log('[CHAT] Sending offer to server...');_this.state.socket.emit('offer',{sdp:offer,target:contact.id});}).catch(function(err){return console.error('[CHAT] Offer creation error',err);});_this.setState({peerConnection:peerConnection});}).catch(function(err){return console.error('[CHAT] getUserMedia error',err);});};_this.acceptCall=function(){var _this$state$callerInf;console.log('[CHAT] Accepting call from:',_this.state.callerInfo);_this.setState({incomingCallModal:false,callState:'inCall'});var callerId=(_this$state$callerInf=_this.state.callerInfo)===null||_this$state$callerInf===void 0?void 0:_this$state$callerInf.from;if(callerId&&(!_this.state.contact.id||_this.state.contact.id!==callerId)){_this.setState({contact:Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},_this.state.contact),{},{id:callerId,name:_this.state.callerInfo.callerName})});}// Access microphone (audio only for now)\nnavigator.mediaDevices.getUserMedia({audio:true,video:false}).then(function(stream){console.log('[CHAT] Got localStream (callee), tracks:',stream.getAudioTracks());_this.setState({localStream:stream});var peerConnection=_this.createPeerConnection();// Add local tracks\nstream.getTracks().forEach(function(track){console.log('[CHAT] Callee adding local track:',track.label);peerConnection.addTrack(track,stream);});// Once the peerConnection is ready, if there's a stored pendingOffer, handle it now.\n_this.setState({peerConnection:peerConnection},function(){if(_this.state.pendingOffer){var _this$state$pendingOf=_this.state.pendingOffer,sdp=_this$state$pendingOf.sdp,caller=_this$state$pendingOf.caller;_this.handleOffer(sdp,caller);_this.setState({pendingOffer:null});}});}).catch(function(err){return console.error('[CHAT] Error accessing mic (callee)',err);});};_this.rejectCall=function(){console.log('[CHAT] Rejecting call from:',_this.state.callerInfo);_this.setState({incomingCallModal:false,callState:'idle',callerInfo:null,pendingOffer:null// discard any stored offer\n});// Optionally notify the caller that call is rejected\n// e.g. this.state.socket.emit('callRejected', {...});\n};_this.createPeerConnection=function(){console.log('[CHAT] Creating RTCPeerConnection...');var configuration={iceServers:[{urls:'stun:stun1.l.google.com:19302'}// Add a TURN server if needed for NAT traversal\n]};var peerConnection=new RTCPeerConnection(configuration);// On ICE candidate\npeerConnection.onicecandidate=function(event){if(event.candidate){var targetId=_this.state.contact.id||_this.state.callerInfo&&_this.state.callerInfo.from;console.log('[CHAT] Sending ICE candidate to:',targetId);_this.state.socket.emit('iceCandidate',{candidate:event.candidate,target:targetId});}else{console.log('[CHAT] ICE gathering complete (no more candidates)');}};// On track (remote stream)\npeerConnection.ontrack=function(event){console.log('[CHAT] ontrack => remote track label:',event.track.label);_this.setState({remoteStream:event.streams[0]});};// Handle connection state changes\npeerConnection.onconnectionstatechange=function(){var state=peerConnection.connectionState;console.log('[CHAT] PeerConnection state:',state);if(state==='disconnected'||state==='failed'||state==='closed'){console.log('[CHAT] PeerConnection ended, calling endCall()');_this.endCall();}};return peerConnection;};_this.endCall=function(){console.log('[CHAT] endCall invoked');var _this$state=_this.state,socket=_this$state.socket,contact=_this$state.contact,callerInfo=_this$state.callerInfo,peerConnection=_this$state.peerConnection,localStream=_this$state.localStream,callState=_this$state.callState;var targetId=contact.id||callerInfo&&callerInfo.from;// If we are calling or in call, notify other side\nif(callState==='calling'||callState==='inCall'){console.log('[CHAT] Emitting hangUp to target:',targetId);socket.emit('hangUp',{target:targetId});}// Close peerConnection\nif(peerConnection){console.log('[CHAT] Closing peerConnection...');peerConnection.close();}// Stop local media\nif(localStream){console.log('[CHAT] Stopping localStream tracks');localStream.getTracks().forEach(function(track){return track.stop();});}_this.setState({callState:'idle',peerConnection:null,localStream:null,remoteStream:null,callerInfo:null,incomingCallModal:false,pendingOffer:null// clear any pending offer\n});};_this.onData=function(user,contacts,messages,users){console.log('[CHAT] onData => user:',user,' contacts:',contacts.length);var contact=contacts[0]||{};_this.setState({messages:messages,contacts:contacts,user:user,contact:contact},function(){_this.updateUsersState(users);});};_this.onNewMessage=function(message){if(message.sender===_this.state.contact.id){_this.setState({typing:false});_this.state.socket.emit('seen',_this.state.contact.id);message.seen=true;}var newMessages=_this.state.messages.concat(message);_this.setState({messages:newMessages});};_this.onTypingMessage=function(sender){if(_this.state.contact.id!==sender)return;_this.setState({typing:sender});clearTimeout(_this.state.timeout);var timeout=setTimeout(function(){return _this.setState({typing:false});},3000);_this.setState({timeout:timeout});};_this.onSocketError=function(err){console.error('[CHAT] Socket error:',err);if(err==='auth_error'){src_Auth.logout();_this.props.history.push('/login');}};_this.updateUsersState=function(users){var contacts=_this.state.contacts;contacts.forEach(function(element,index){if(users[element.id])contacts[index].status=users[element.id];});_this.setState({contacts:contacts});var contact=_this.state.contact;if(users[contact.id])contact.status=users[contact.id];_this.setState({contact:contact});};_this.sendMessage=function(message){if(!_this.state.contact.id)return;message.receiver=_this.state.contact.id;var newMessages=_this.state.messages.concat(message);_this.setState({messages:newMessages});_this.state.socket.emit('message',message);};_this.sendType=function(){if(_this.state.contact.id){_this.state.socket.emit('typing',_this.state.contact.id);}};_this.logout=function(){console.log('[CHAT] Logging out user');_this.state.socket.disconnect();src_Auth.logout();_this.props.history.push('/');};_this.renderChat=function(){var _this$state2=_this.state,contact=_this$state2.contact,user=_this$state2.user,messages=_this$state2.messages;if(!contact||!contact.id)return null;var filtered=messages.filter(function(m){return m.sender===contact.id||m.receiver===contact.id;});return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chat_Messages,{user:user,messages:filtered});};_this.onChatNavigate=function(contact){console.log('[CHAT] onChatNavigate => switching to contact:',contact.id);_this.setState({contact:contact});_this.state.socket.emit('seen',contact.id);var newMessages=_this.state.messages.map(function(m){if(m.sender===contact.id){return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},m),{},{seen:true});}return m;});_this.setState({messages:newMessages});};_this.userProfileToggle=function(){return _this.setState({userProfile:!_this.state.userProfile});};_this.profileToggle=function(){return _this.setState({profile:!_this.state.profile});};return _this;}Object(createClass[\"a\" /* default */])(Chat,[{key:\"componentDidMount\",value:function componentDidMount(){// Initialize socket.io connection.\nthis.initSocketConnection();}// ============ SOCKET.IO CONNECTION & EVENTS ============\n},{key:\"render\",value:// ============ RENDERING ============\nfunction render(){var _this2=this;if(!this.state.connected||!this.state.contacts||!this.state.messages){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Spinner[\"a\" /* default */],{id:\"loader\",color:\"success\"});}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Row[\"a\" /* default */],{className:\"h-100\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{id:\"contacts-section\",className:\"col-6 col-md-4\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chat_ContactHeader,{user:this.state.user,toggle:this.profileToggle}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chat_Contacts,{contacts:this.state.contacts,messages:this.state.messages,onChatNavigate:this.onChatNavigate}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(side_UserProfile,{contact:this.state.contact,toggle:this.userProfileToggle,open:this.state.userProfile}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(side_EditProfile,{user:this.state.user,toggle:this.profileToggle,open:this.state.profile})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{id:\"messages-section\",className:\"col-6 col-md-8\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chat_ChatHeader,{contact:this.state.contact,typing:this.state.typing,toggle:this.userProfileToggle,logout:this.logout// pass the call method so ChatHeader can call\n,onCall:this.initiateCall}),this.renderChat(),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chat_MessageForm,{sender:this.sendMessage,sendType:this.sendType}),(this.state.callState==='calling'||this.state.callState==='inCall')&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{color:\"danger\",onClick:this.endCall,className:\"mt-2\",children:\"Hang Up\"}),this.state.remoteStream&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"audio\",{ref:function ref(audioEl){if(audioEl&&_this2.state.remoteStream){console.log('[CHAT] Attaching remoteStream to audio element');audioEl.srcObject=_this2.state.remoteStream;}},autoPlay:true})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Modal[\"a\" /* default */],{isOpen:this.state.incomingCallModal,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModalHeader[\"a\" /* default */],{children:\"Incoming Call\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModalBody[\"a\" /* default */],{children:this.state.callerInfo&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[this.state.callerInfo.callerName,\" is calling...\"]})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ModalFooter[\"a\" /* default */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{color:\"success\",onClick:this.acceptCall,children:\"Accept\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{color:\"secondary\",onClick:this.rejectCall,children:\"Reject\"})]})]})]});}}]);return Chat;}(react_default.a.Component);/* harmony default export */ var views_Chat = (Chat_Chat);\n// CONCATENATED MODULE: ./src/views/NotFound.js\n/**\n * NotFound Component Page.\n * @param props\n */var NotFound_NotFound=function NotFound(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:\"The requested page was not found\"});};/* harmony default export */ var views_NotFound = (NotFound_NotFound);\n// EXTERNAL MODULE: ./src/views/auth.css\nvar auth = __webpack_require__(96);\n\n// CONCATENATED MODULE: ./src/assets/logo.png\n/* harmony default export */ var logo = (__webpack_require__.p + \"static/media/logo.2e5b0bba.png\");\n// CONCATENATED MODULE: ./src/views/Register.js\n//   CSS \nvar Register_Register=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(Register,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(Register);function Register(){var _this;Object(classCallCheck[\"a\" /* default */])(this,Register);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={name:'',username:'',password:'',error:''};_this.onChange=function(e){return _this.setState({[e.target.name]:e.target.value,error:null});};_this.onSubmit=function(e){e.preventDefault();var data={name:_this.state.name,username:_this.state.username,password:_this.state.password};axios_default.a.post('/api/auth/register',data).then(function(res){src_Auth.login(res.data);_this.props.history.push('/');}).catch(function(err){return _this.setState({error:err.response.data.message});});};return _this;}Object(createClass[\"a\" /* default */])(Register,[{key:\"render\",value:function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"auth-container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */],{onSubmit:this.onSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:logo,alt:\"Logo\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h5\",{className:\"auth-header\",children:\"Create a New Account\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Error,{error:this.state.error}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{className:\"auth-form-control\",value:this.state.name,name:\"name\",onChange:this.onChange,placeholder:\"Name\",required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{className:\"auth-form-control\",value:this.state.username,name:\"username\",onChange:this.onChange,placeholder:\"Username\",required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{type:\"password\",className:\"auth-form-control\",value:this.state.password,name:\"password\",onChange:this.onChange,placeholder:\"Password\",required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{className:\"auth-button\",block:true,children:\"Create\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"small\",{className:\"auth-footer\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/login\",children:\"Login\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"auth-footer\",children:[\"\\xA9 \",new Date().getFullYear()]})]})});}}]);return Register;}(react_default.a.Component);/* harmony default export */ var views_Register = (Register_Register);\n// CONCATENATED MODULE: ./src/views/Login.js\n//   CSS \nvar Login_Login=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(Login,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(Login);function Login(){var _this;Object(classCallCheck[\"a\" /* default */])(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={username:'',password:'',error:''};_this.onChange=function(e){return _this.setState({[e.target.name]:e.target.value,error:null});};_this.onSubmit=function(e){e.preventDefault();var data={username:_this.state.username,password:_this.state.password};axios_default.a.post('/api/auth',data).then(function(res){src_Auth.login(res.data);_this.props.history.push('/');}).catch(function(err){return _this.setState({error:err.response.data.message});});};return _this;}Object(createClass[\"a\" /* default */])(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"auth-container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */],{onSubmit:this.onSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:logo,alt:\"Logo\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h5\",{className:\"auth-header\",children:\"Login\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Error,{error:this.state.error}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{className:\"auth-form-control\",value:this.state.username,name:\"username\",onChange:this.onChange,placeholder:\"Username\",required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{type:\"password\",className:\"auth-form-control\",value:this.state.password,name:\"password\",onChange:this.onChange,placeholder:\"Password\",required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{className:\"auth-button\",block:true,children:\"Login\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"small\",{className:\"auth-footer\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/register\",children:\"Create a new account\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"auth-footer\",children:[\"\\xA9 \",new Date().getFullYear()]})]})});}}]);return Login;}(react_default.a.Component);/* harmony default export */ var views_Login = (Login_Login);\n// EXTERNAL MODULE: ./node_modules/reactstrap/es/Card.js\nvar Card = __webpack_require__(193);\n\n// CONCATENATED MODULE: ./src/views/Password.js\n/**\n * Change Password Component.\n */var Password_Password=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(Password,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(Password);function Password(){var _this;Object(classCallCheck[\"a\" /* default */])(this,Password);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={password:'',newPassword:''};_this.onChange=function(e){return _this.setState({[e.target.name]:e.target.value,error:null});};_this.onSubmit=function(e){e.preventDefault();var data={password:_this.state.password,newPassword:_this.state.newPassword};axios_default.a.post('/api/account/password',data).then(function(res){_this.props.history.push('/');}).catch(function(err){_this.setState({error:err.response.data.message});});};return _this;}Object(createClass[\"a\" /* default */])(Password,[{key:\"render\",value:/**\n     * Render Component.\n     */function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Card[\"a\" /* default */],{className:\"auth col-lg-3 col-sm-6\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */],{onSubmit:this.onSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:logo,alt:\"\",width:\"200\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h5\",{className:\"mb-4\",children:\"Change Password\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Error,{error:this.state.error}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{type:\"password\",value:this.state.password,name:\"password\",onChange:this.onChange,placeholder:\"Current Password\",required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Input[\"a\" /* default */],{type:\"password\",value:this.state.newPassword,name:\"newPassword\",onChange:this.onChange,placeholder:\"New Password\",required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{block:true,className:\"mb-3\",children:\"Change\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"small\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/\",children:\"Back\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"m-3 mb-3 text-muted\",children:[\"\\xA9 \",new Date().getFullYear()]})]})});}}]);return Password;}(react_default.a.Component);/* harmony default export */ var views_Password = (Password_Password);\n// CONCATENATED MODULE: ./src/views/index.js\n/**\n * Export views.\n */\n// CONCATENATED MODULE: ./src/App.js\nvar App_App=/*#__PURE__*/function(_Component){Object(inherits[\"a\" /* default */])(App,_Component);var _super=Object(createSuper[\"a\" /* default */])(App);function App(props){var _this;Object(classCallCheck[\"a\" /* default */])(this,App);_this=_super.call(this,props);src_Auth.init();return _this;}Object(createClass[\"a\" /* default */])(App,[{key:\"render\",value:function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"main-container\",className:\"container-fluid\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"d\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_AppRoute,{path:\"/\",exact:true,component:views_Chat,can:src_Auth.auth,redirect:\"/login\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_AppRoute,{path:\"/password\",component:views_Password,can:src_Auth.auth,redirect:\"/login\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_AppRoute,{path:\"/password\",component:views_Password,can:src_Auth.auth,redirect:\"/login\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_AppRoute,{path:\"/register\",component:views_Register,can:src_Auth.guest,redirect:\"/\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_AppRoute,{path:\"/Login\",component:views_Login,can:src_Auth.guest,redirect:\"/\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_AppRoute,{component:views_NotFound})]})})});}}]);return App;}(react[\"Component\"]);/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/serviceWorker.js\n// This optional code is used to register a service worker.\n// register() is not called by default.\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\nvar isLocalhost=Boolean(window.location.hostname==='localhost'||// [::1] is the IPv6 localhost address.\nwindow.location.hostname==='[::1]'||// 127.0.0.1/8 is considered localhost for IPv4.\nwindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function register(config){if( true&&'serviceWorker'in navigator){// The URL constructor is available in all browsers that support SW.\nvar publicUrl=new URL(\"\",window.location.href);if(publicUrl.origin!==window.location.origin){// Our service worker won't work if PUBLIC_URL is on a different origin\n// from what our page is served on. This might happen if a CDN is used to\n// serve assets; see https://github.com/facebook/create-react-app/issues/2374\nreturn;}window.addEventListener('load',function(){var swUrl=\"\".concat(\"\",\"/service-worker.js\");if(isLocalhost){// This is running on localhost. Let's check if a service worker still exists or not.\ncheckValidServiceWorker(swUrl,config);// Add some additional logging to localhost, pointing developers to the\n// service worker/PWA documentation.\nnavigator.serviceWorker.ready.then(function(){console.log('This web app is being served cache-first by a service '+'worker. To learn more, visit https://bit.ly/CRA-PWA');});}else{// Is not localhost. Just register service worker\nregisterValidSW(swUrl,config);}});}}function registerValidSW(swUrl,config){navigator.serviceWorker.register(swUrl).then(function(registration){registration.onupdatefound=function(){var installingWorker=registration.installing;if(installingWorker==null){return;}installingWorker.onstatechange=function(){if(installingWorker.state==='installed'){if(navigator.serviceWorker.controller){// At this point, the updated precached content has been fetched,\n// but the previous service worker will still serve the older\n// content until all client tabs are closed.\nconsole.log('New content is available and will be used when all '+'tabs for this page are closed. See https://bit.ly/CRA-PWA.');// Execute callback\nif(config&&config.onUpdate){config.onUpdate(registration);}}else{// At this point, everything has been precached.\n// It's the perfect time to display a\n// \"Content is cached for offline use.\" message.\nconsole.log('Content is cached for offline use.');// Execute callback\nif(config&&config.onSuccess){config.onSuccess(registration);}}}};};}).catch(function(error){console.error('Error during service worker registration:',error);});}function checkValidServiceWorker(swUrl,config){// Check if the service worker can be found. If it can't reload the page.\nfetch(swUrl).then(function(response){// Ensure service worker exists, and that we really are getting a JS file.\nvar contentType=response.headers.get('content-type');if(response.status===404||contentType!=null&&contentType.indexOf('javascript')===-1){// No service worker found. Probably a different app. Reload the page.\nnavigator.serviceWorker.ready.then(function(registration){registration.unregister().then(function(){window.location.reload();});});}else{// Service worker found. Proceed as normal.\nregisterValidSW(swUrl,config);}}).catch(function(){console.log('No internet connection found. App is running in offline mode.');});}function unregister(){if('serviceWorker'in navigator){navigator.serviceWorker.ready.then(function(registration){registration.unregister();});}}\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{}),document.getElementById('root'));// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nunregister();\n\n/***/ }),\n\n/***/ 96:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ })\n\n},[[182,1,2]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\moaid\\Desktop\\chat-app-master\\web\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\moaid\\Desktop\\chat-app-master\\web\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\moaid\\Desktop\\chat-app-master\\web\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\moaid\\Desktop\\chat-app-master\\web\\src\\index.css","C:/Users/moaid/Desktop/chat-app-master/web/src/AppRoute.js","C:/Users/moaid/Desktop/chat-app-master/web/src/components/Error.js","C:\\Users\\moaid\\Desktop\\chat-app-master\\web\\node_modules\\url-loader\\dist\\cjs.js??ref--5-oneOf-1!C:\\Users\\moaid\\Desktop\\chat-app-master\\web\\src\\assets\\avatar.png","C:/Users/moaid/Desktop/chat-app-master/web/src/components/Avatar.js","C:/Users/moaid/Desktop/chat-app-master/web/src/components/chat/ContactHeader.js","C:/Users/moaid/Desktop/chat-app-master/web/src/components/chat/Contact.js","C:/Users/moaid/Desktop/chat-app-master/web/src/components/chat/Contacts.js","C:/Users/moaid/Desktop/chat-app-master/web/src/components/chat/ChatHeader.js","C:/Users/moaid/Desktop/chat-app-master/web/src/components/chat/Message.js","C:/Users/moaid/Desktop/chat-app-master/web/src/components/chat/Messages.js","C:/Users/moaid/Desktop/chat-app-master/web/src/components/chat/MessageForm.js","C:/Users/moaid/Desktop/chat-app-master/web/src/components/side/UserProfile.js","C:/Users/moaid/Desktop/chat-app-master/web/src/components/side/EditProfile.js","C:/Users/moaid/Desktop/chat-app-master/web/src/components/index.js","C:/Users/moaid/Desktop/chat-app-master/web/src/Auth.js","C:/Users/moaid/Desktop/chat-app-master/web/src/views/Chat.js","C:/Users/moaid/Desktop/chat-app-master/web/src/views/NotFound.js","C:\\Users\\moaid\\Desktop\\chat-app-master\\web\\node_modules\\url-loader\\dist\\cjs.js??ref--5-oneOf-1!C:\\Users\\moaid\\Desktop\\chat-app-master\\web\\src\\assets\\logo.png","C:/Users/moaid/Desktop/chat-app-master/web/src/views/Register.js","C:/Users/moaid/Desktop/chat-app-master/web/src/views/Login.js","C:/Users/moaid/Desktop/chat-app-master/web/src/views/Password.js","C:/Users/moaid/Desktop/chat-app-master/web/src/views/index.js","C:/Users/moaid/Desktop/chat-app-master/web/src/App.js","C:/Users/moaid/Desktop/chat-app-master/web/src/serviceWorker.js","C:/Users/moaid/Desktop/chat-app-master/web/src/index.js","C:\\Users\\moaid\\Desktop\\chat-app-master\\web\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\moaid\\Desktop\\chat-app-master\\web\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\moaid\\Desktop\\chat-app-master\\web\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\moaid\\Desktop\\chat-app-master\\web\\src\\views\\auth.css"],"names":["AppRoute","Component","component","can","redirect","rest","props","Error","error","Avatar","src","avatar","file","ContactHeader","user","toggle","Contact","contact","status","name","message","content","moment","date","format","unseen","Contacts","state","search","onSearch","e","setState","target","value","renderContact","index","includes","messages","filter","sender","id","receiver","lastMessage","length","seen","onChatNavigate","bind","contacts","map","React","ChatHeader","typing","fromNow","handleCall","console","log","onCall","padding","justifyContent","cursor","marginLeft","history","push","logout","withRouter","Message","outgoing","Messages","renderMessage","MessageForm","lastType","onChange","onSend","Date","getTime","onKeyDown","key","shiftKey","preventDefault","sendType","UserProfile","open","about","EditProfile","showFileUpload","fileUpload","current","click","onImageChange","files","image","URL","createObjectURL","onSubmit","data","FormData","append","axios","post","then","catch","err","response","onClose","createRef","overflow","Auth","init","JSON","parse","localStorage","getItem","defaults","headers","common","token","login","setItem","stringify","removeItem","auth","guest","getToken","setUser","newProfile","Chat","userProfile","profile","connected","timeout","callState","incomingCallModal","callerInfo","localStream","remoteStream","peerConnection","pendingOffer","initSocketConnection","socket","socketIO","process","query","on","onData","onNewMessage","updateUsersState","onTypingMessage","onSocketError","from","callerName","sdp","caller","handleOffer","callee","desc","RTCSessionDescription","setRemoteDescription","candidate","addIceCandidate","RTCIceCandidate","endCall","createAnswer","answer","setLocalDescription","emit","initiateCall","recipientId","username","navigator","mediaDevices","getUserMedia","audio","video","stream","getAudioTracks","createPeerConnection","getTracks","forEach","track","label","addTrack","createOffer","offer","acceptCall","callerId","rejectCall","configuration","iceServers","urls","RTCPeerConnection","onicecandidate","event","targetId","ontrack","streams","onconnectionstatechange","connectionState","close","stop","users","newMessages","concat","clearTimeout","setTimeout","element","sendMessage","disconnect","renderChat","filtered","m","userProfileToggle","profileToggle","audioEl","srcObject","NotFound","Register","password","res","Logo","getFullYear","Login","Password","newPassword","logo","App","isLocalhost","Boolean","window","location","hostname","match","register","config","publicUrl","href","origin","addEventListener","swUrl","checkValidServiceWorker","serviceWorker","ready","registerValidSW","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","fetch","contentType","get","indexOf","unregister","reload","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\n/**\r\n *  AppRoute Component.\r\n * @param Component\r\n * @param can\r\n * @param redirect\r\n * @param rest\r\n */\r\nconst AppRoute = ({component: Component, can = () => true, redirect, ...rest}) => (\r\n    <Route {...rest} render = {(props) => (\r\n        can() ? <Component {...props} /> : <Redirect to={redirect} />\r\n    )} />\r\n);\r\n\r\nexport default AppRoute;","import React from 'react';\nimport { Alert } from 'reactstrap';\n\n/**\n * Error Component.\n * @param props\n */\nconst Error = props => (\n    props.error ? <Alert color='danger'>{props.error}</Alert> : ''\n);\n\nexport default Error;","export default \"data:image/png;base64,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\"","import React from \"react\";\nimport avatar from \"assets/avatar.png\";\n\n/**\n * Avatar Component.\n * @param props\n */\nconst Avatar = props => {\n   let src = props.src ? `uploads/${props.src}` : avatar;\n   return <img src={props.file || src} className=\"img-fluid rounded-circle ml-3 avatar\" alt=\"\" />\n};\n\nexport default Avatar;","import React from \"react\";\nimport Avatar from \"components/Avatar\";\nimport { Row } from \"reactstrap\";\n\n/**\n * Contacts Header.\n */\nconst ContactHeader = (props) => (\n  <Row className=\"heading\">\n    {/* Use optional chaining (?) to safely access avatar */}\n    <Avatar src={props.user?.avatar} />\n    <div>Contacts</div>\n    <div className=\"mr-auto nav-link\" onClick={props.toggle}>\n      <i className=\"fa fa-bars\" />\n    </div>\n  </Row>\n);\n\nexport default ContactHeader;\n","import React from \"react\";\nimport Avatar from \"components/Avatar\";\nimport moment from 'moment';\nimport { Badge } from 'reactstrap';\n\n/**\n * Contact Item.\n */\nconst Contact = props => (\n   <div className=\"contact\">\n       <div>\n           <Avatar src={props.contact.avatar} />\n           {props.contact.status === true ? <i className='fa fa-circle online' /> : ''}\n       </div>\n       <div className=\"w-50\">\n           <div className=\"name\">{props.contact.name}</div>\n           <div className=\"small last-message\">\n               {props.message ? props.message.content : 'Click here to start the conversation'}\n           </div>\n       </div>\n       <div className=\"flex-grow-1 text-left\">\n           <div className=\"small text-muted\">\n               {props.message ? moment(props.message.date).format(\"hh:mm a\") : ''}\n           </div>\n           { props.unseen > 0 ? <Badge color=\"success\">{props.unseen}</Badge> : ''}\n       </div>\n   </div>\n);\n\nexport default Contact;\n","import React from \"react\";\nimport Contact from \"./Contact\";\nimport { Row, Input } from 'reactstrap';\n\n/**\n * Contacts.\n */\nclass Contacts extends React.Component {\n\n    state = { search: ''};\n\n    /**\n     * Handle search event.\n     */\n    onSearch = e => this.setState({search: e.target.value});\n\n    /**\n     * Render component.\n     */\n    render(){\n       return (\n           <div className=\"list\">\n                <Row className=\"search\">\n                    <Input onChange={this.onSearch} placeholder=\"Search\" />\n                </Row>\n               <Row id=\"contacts\">\n                    {this.props.contacts.map((contact, index) => this.renderContact(contact, index) )}\n               </Row>\n           </div>\n       );\n   }\n\n    /**\n     * Render single contact.\n     * @param contact\n     * @param index\n     */\n    renderContact = (contact, index) => {\n       if(!contact.name.includes(this.state.search)) return;\n       let messages = this.props.messages.filter(e => e.sender === contact.id || e.receiver === contact.id);\n       let lastMessage = messages[messages.length - 1];\n       let unseen = messages.filter(e => !e.seen && e.sender === contact.id).length;\n       return(\n           <div className=\"w-100\" key={index} onClick={this.props.onChatNavigate.bind(this, contact)}>\n               <Contact contact={contact} message={lastMessage} unseen={unseen}/>\n           </div>\n       );\n   }\n}\nexport default Contacts;\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Avatar from \"components/Avatar\";\nimport {\n  Row,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  Button\n} from \"reactstrap\";\nimport moment from \"moment\";\n\n/**\n * Chat Header.\n */\nconst ChatHeader = (props) => {\n  const status = () => {\n    if (props.typing) return \"Typing now\";\n    if (props.contact.status === true) return \"Online now\";\n    if (props.contact.status) return moment(props.contact.status).fromNow();\n    return \"\";\n  };\n\n  const handleCall = () => {\n    console.log(\"[ChatHeader] Call button clicked\");\n    if (props.onCall) {\n      props.onCall(props.contact);\n    }\n  };\n\n  return (\n    <Row\n      className=\"heading m-0 align-items-center w-100\"\n      style={{ padding: \"0.5rem\", justifyContent: \"space-between\" }}\n    >\n      {/* LEFT: Avatar + name/status */}\n      <div\n        className=\"d-flex align-items-center\"\n        onClick={props.toggle}\n        style={{ cursor: \"pointer\" }}\n      >\n        <Avatar src={props.contact?.avatar} />\n        <div className=\"text-left ml-2\">\n          <div>{props.contact?.name || \"\"}</div>\n          <small>{status()}</small>\n        </div>\n      </div>\n\n      {/* RIGHT: Call button + three-dots side by side */}\n      <div className=\"d-flex align-items-center\" style={{ marginLeft: \"0.5rem\" }}>\n        {/* Call button (green) */}\n        <Button color=\"success\" onClick={handleCall} className=\"mr-2\">\n          <i className=\"fa fa-phone\" />\n        </Button>\n\n        {/* Three-dots menu */}\n        <UncontrolledDropdown>\n          <DropdownToggle\n            tag=\"a\"\n            className=\"nav-link\"\n            style={{ cursor: \"pointer\" }}\n          >\n            <i className=\"fa fa-ellipsis-v\" />\n          </DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem onClick={() => props.history.push(\"/password\")}>Change Password</DropdownItem>\n            <DropdownItem divider />\n            <DropdownItem onClick={props.logout}>Logout</DropdownItem>\n          </DropdownMenu>\n        </UncontrolledDropdown>\n      </div>\n    </Row>\n  );\n};\n\nexport default withRouter(ChatHeader);\n","import React from \"react\";\nimport moment from 'moment';\n\n/**\n * Message item.\n */\nconst Message = props => (\n   <div className={props.message.outgoing ? 'message-item' : 'message-item incoming'}>\n       <div className=\"d-flex flex-row\">\n           <div className=\"body m-1 mr-2\">\n               <div>{props.message.content}</div>\n               <span className=\"small text-muted\">\n                   {moment(props.message.date).format(\"hh:mm a | MMM D\") }\n               </span>\n           </div>\n       </div>\n   </div>\n);\n\nexport default Message;\n","import React from \"react\";\nimport Message from \"./Message\";\n\n/**\n * Messages List Component.\n */\nclass Messages extends React.Component {\n\n    /**\n     * Render component.\n     */\n   render() {\n       return (\n           <div id=\"messages\">\n               {this.props.messages.map(this.renderMessage)}\n           </div>\n       );\n   }\n\n   renderMessage = (message, index) => {\n       message.outgoing = message.receiver !== this.props.user.id;\n       return <Message key={index} message={message} />\n   };\n\n}\n\nexport default Messages;","import React from \"react\";\nimport { Input } from \"reactstrap\";\nimport moment from \"moment\";\n\n/**\n * MessageForm Component.\n */\nclass MessageForm extends React.Component {\n\n    state = { message: '', lastType: false };\n\n    /**\n     * Handle message change event.\n     * @param e\n     */\n    onChange = e => this.setState({message: e.target.value});\n\n    /**\n     * Send message.\n     * @param e\n     */\n    onSend = e => {\n       if (!this.state.message) return;\n       let message = {\n           content: this.state.message,\n           date: new Date().getTime()\n       };\n       this.props.sender(message);\n       this.setState({message: ''});\n   };\n\n    /**\n     * Handle OnKeyDown event.\n     * @param e\n     */\n   onKeyDown = e => {\n       if (e.key === 'Enter' && !e.shiftKey) {\n           this.setState({lastType: false});\n           this.onSend();\n           e.preventDefault();\n       } else if (!this.state.lastType || moment() - this.state.lastType > 2000) {\n           this.setState({lastType: moment()});\n           this.props.sendType();\n       }\n   };\n\n    /**\n     * Render component.\n     */\n    render() {\n       return (\n           <div id=\"send-message\">\n               <Input\n                   type=\"textarea\"\n                   rows=\"1\"\n                   onChange={this.onChange}\n                   onKeyDown={this.onKeyDown}\n                   value={this.state.message}\n                   placeholder=\"Write your message here\"\n               />\n               <i className=\"fa fa-send text-muted px-3 send\" onClick={this.onSend} />\n           </div>\n       );\n   }\n\n}\n\nexport default MessageForm;\n","import React from \"react\";\nimport Avatar from 'components/Avatar';\nimport { Row } from \"reactstrap\";\n\n/**\n * UserProfile Component.\n */\nconst UserProfile = props => (\n\n    <div className={props.open ? 'side-profile open' : 'side-profile'}>\n\n        <Row className=\"heading\">\n            <div className=\"mr-2 nav-link\" onClick={props.toggle}>\n                <i className=\"fa fa-arrow-right\" />\n            </div>\n            <div>{props.contact.name}</div>\n        </Row>\n\n        <div className=\"d-flex flex-column overflow-auto\">\n            <Avatar src={props.contact.avatar}/>\n            <div className=\"bg-white px-3 py-2\">\n                <label className=\"text-muted\">Status Message</label>\n                <p>{props.contact.about ? props.contact.about : 'Hello, I am using chat me'}</p>\n            </div>\n        </div>\n\n    </div>\n\n);\n\nexport default UserProfile;\n","import React from \"react\";\nimport { Row, Form, Input, Button } from \"reactstrap\";\nimport Error from \"components/Error\";\nimport Avatar from \"components/Avatar\";\nimport axios from \"axios\";\n\n/**\n * EditProfile Component.\n */\nclass EditProfile extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Provide a safe fallback if props.user is null/undefined\n    const user = props.user || {};\n\n    this.state = {\n      name: user.name || \"\",\n      about: user.about || \"\",\n      image: null,\n      avatar: null,\n      error: null\n    };\n\n    this.fileUpload = React.createRef();\n  }\n\n  /**\n   * Trigger click on file upload input.\n   */\n  showFileUpload = () => this.fileUpload.current.click();\n\n  /**\n   * If avatar input changed then change the preview.\n   */\n  onImageChange = (e) => {\n    if (e.target.files && e.target.files[0]) {\n      this.setState({\n        image: URL.createObjectURL(e.target.files[0]),\n        avatar: e.target.files[0]\n      });\n    }\n  };\n\n  /**\n   * Change form handler.\n   */\n  onChange = (e) => this.setState({ [e.target.name]: e.target.value, error: null });\n\n  /**\n   * Form submit handler.\n   */\n  onSubmit = (e) => {\n    e.preventDefault();\n    const data = new FormData();\n    data.append(\"name\", this.state.name);\n    data.append(\"about\", this.state.about);\n    if (this.state.avatar) {\n      data.append(\"avatar\", this.state.avatar, this.state.avatar.name);\n    }\n    axios\n      .post(\"/api/account\", data)\n      .then(this.props.toggle)\n      .catch((err) => {\n        this.setState({\n          error: err.response?.data?.message || \"An error occurred.\"\n        });\n      });\n  };\n\n  /**\n   * When closing sidebar.\n   */\n  onClose = () => {\n    // If props.user might still be null, handle that safely:\n    const user = this.props.user || {};\n    this.setState({\n      image: null,\n      avatar: null,\n      name: user.name || \"\",\n      about: user.about || \"\"\n    });\n    this.props.toggle();\n  };\n\n  /**\n   * Render component.\n   */\n  render() {\n    return (\n      <div className={this.props.open ? \"side-profile open\" : \"side-profile\"}>\n        <Row className=\"heading\">\n          <div className=\"mr-2 nav-link\" onClick={this.onClose}>\n            <i className=\"fa fa-arrow-right\" />\n          </div>\n          <div>Profile</div>\n        </Row>\n\n        <div className=\"d-flex flex-column\" style={{ overflow: \"auto\" }}>\n          <Form onSubmit={this.onSubmit}>\n            <Error error={this.state.error} />\n\n            {/* Avatar preview + image upload */}\n            <div className=\"text-center\" onClick={this.showFileUpload}>\n              <Avatar\n                // If props.user might be null, use optional chaining here:\n                src={this.props.user?.avatar}\n                file={this.state.image}\n              />\n            </div>\n\n            <input\n              type=\"file\"\n              ref={this.fileUpload}\n              onChange={this.onImageChange}\n              className=\"d-none\"\n            />\n\n            {/* Name field */}\n            <div className=\"bg-white px-4 py-2\">\n              <label className=\"text-muted\">Name</label>\n              <Input\n                value={this.state.name}\n                name=\"name\"\n                onChange={this.onChange}\n                required\n                autoComplete=\"off\"\n              />\n            </div>\n\n            {/* About field */}\n            <div className=\"bg-white px-3 py-2\">\n              <label className=\"text-muted\">Status Message</label>\n              <Input\n                value={this.state.about}\n                name=\"about\"\n                onChange={this.onChange}\n                required\n                autoComplete=\"off\"\n              />\n            </div>\n\n            {/* Submit button */}\n            <div className=\"bg-white px-3 py-2\">\n              <Button block className=\"mt-3\">\n                Save\n              </Button>\n            </div>\n          </Form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default EditProfile;\n","import Error from './Error';\nimport Avatar from './Avatar';\nimport ContactHeader from './chat/ContactHeader';\nimport Contacts from './chat/Contacts';\nimport ChatHeader from './chat/ChatHeader';\nimport Messages from './chat/Messages';\nimport MessageForm from './chat/MessageForm';\nimport UserProfile from './side/UserProfile';\nimport EditProfile from './side/EditProfile';\n\n/**\n * Export Components.\n */\nexport {\n    Error, Avatar, ContactHeader, Contacts, ChatHeader, Messages, MessageForm, UserProfile, EditProfile\n}","import axios from 'axios';\r\n\r\nconst Auth = {\r\n\r\n    /**\r\n     * Initialize axios headers.\r\n     */\r\n    init: () => {\r\n        let user = JSON.parse(localStorage.getItem('user'));\r\n        axios.defaults.headers.common['Authorization'] = user !== null ? user.token : '';\r\n    },\r\n\r\n    /**\r\n     * Store user data after login.\r\n     * @param user\r\n     */\r\n    login: user => {\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n        axios.defaults.headers.common['Authorization'] = user.token;\r\n    },\r\n\r\n    /**\r\n     * Delete user data.\r\n     */\r\n    logout: () => {\r\n        delete axios.defaults.headers.common['Authorization'];\r\n        localStorage.removeItem('user');\r\n    },\r\n\r\n    /**\r\n     * Is user authenticated.\r\n     * @returns {boolean}\r\n     */\r\n    auth: () => localStorage.getItem('user') !== null,\r\n\r\n    /**\r\n     * Is guest.\r\n     * @returns {boolean}\r\n     */\r\n    guest: () => localStorage.getItem('user') === null,\r\n\r\n    /**\r\n     * Get user token.\r\n     * @returns {string}\r\n     */\r\n    getToken: () => {\r\n        let user = JSON.parse(localStorage.getItem('user'));\r\n        return user !== null ? user.token : '';\r\n    },\r\n\r\n    /**\r\n     * Set user\r\n     * @param newProfile\r\n     */\r\n    setUser: (newProfile) => {\r\n        let user = JSON.parse(localStorage.getItem('user'));\r\n        newProfile.token = user.token;\r\n        localStorage.setItem('user', JSON.stringify(newProfile));\r\n    },\r\n\r\n};\r\n\r\nexport default Auth;","/**\n * web/src/views/Chat.js\n */\n\nimport React from 'react';\nimport { Row, Spinner, Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport {\n  ContactHeader,\n  Contacts,\n  ChatHeader,\n  Messages,\n  MessageForm,\n  UserProfile,\n  EditProfile,\n} from 'components';\nimport socketIO from 'socket.io-client';\nimport Auth from 'Auth';\n\nclass Chat extends React.Component {\n  state = {\n    contacts: [],\n    contact: {},         // Will hold { id, name, ... } of the current chat\n    userProfile: false,\n    profile: false,\n\n    // Existing message-related states\n    connected: false,\n    messages: [],\n    typing: false,\n    timeout: null,\n    user: null,\n\n    // ------ CALL STATES ------\n    callState: 'idle',  // 'idle' | 'calling' | 'receiving' | 'inCall'\n    incomingCallModal: false,\n    callerInfo: null,   // Will hold { from, callerName }\n\n    // WebRTC\n    localStream: null,\n    remoteStream: null,\n    peerConnection: null,\n\n    // NEW: Store an SDP offer if it arrives before we have a peerConnection.\n    pendingOffer: null,\n  };\n\n  componentDidMount() {\n    // Initialize socket.io connection.\n    this.initSocketConnection();\n  }\n\n  // ============ SOCKET.IO CONNECTION & EVENTS ============\n  initSocketConnection = () => {\n    const socket = socketIO(process.env.REACT_APP_SOCKET, {\n      query: 'token=' + Auth.getToken(),\n    });\n\n    // --- Existing events ---\n    socket.on('connect', () => {\n      console.log('[CHAT] Socket connected');\n      this.setState({ connected: true });\n    });\n    socket.on('disconnect', () => {\n      console.log('[CHAT] Socket disconnected');\n      this.setState({ connected: false });\n    });\n    socket.on('data', this.onData);\n    socket.on('message', this.onNewMessage);\n    socket.on('user_status', this.updateUsersState);\n    socket.on('typing', this.onTypingMessage);\n    socket.on('error', this.onSocketError);\n\n    // ---------------- NEW: CALL EVENTS ----------------\n    socket.on('incomingCall', (data) => {\n      // data => { from: userId, callerName: ... }\n      console.log('[CHAT] Incoming call from:', data);\n      this.setState({\n        callState: 'receiving',\n        incomingCallModal: true,\n        callerInfo: data,   // store who is calling\n      });\n\n      // OPTIONAL: Update contact so we know who we're talking to\n      if (!this.state.contact.id || this.state.contact.id !== data.from) {\n        this.setState({\n          contact: {\n            ...this.state.contact,\n            id: data.from,\n            name: data.callerName,\n          },\n        });\n      }\n    });\n\n    // --- IMPORTANT CHANGE HERE: Store or handle the offer ---\n    socket.on('offer', ({ sdp, caller }) => {\n      console.log('[CHAT] Received offer from:', caller);\n      // If we already have a peerConnection, handle it right away.\n      if (this.state.peerConnection) {\n        this.handleOffer(sdp, caller);\n      } else {\n        // We haven't accepted the call yet => store it in state until we create peerConnection\n        console.log('[CHAT] No peerConnection yet. Storing pendingOffer...');\n        this.setState({ pendingOffer: { sdp, caller } });\n      }\n    });\n\n    socket.on('answer', ({ sdp, callee }) => {\n      console.log('[CHAT] Received answer from:', callee);\n      if (this.state.peerConnection) {\n        const desc = new RTCSessionDescription(sdp);\n        this.state.peerConnection.setRemoteDescription(desc)\n          .then(() => {\n            console.log('[CHAT] Remote description set for answer, callState = inCall');\n            this.setState({ callState: 'inCall' });\n          })\n          .catch(err => console.error('[CHAT] Error setting remote desc (answer)', err));\n      }\n    });\n\n    socket.on('iceCandidate', ({ candidate, from }) => {\n      console.log('[CHAT] Received ICE candidate from:', from);\n      if (this.state.peerConnection && candidate) {\n        this.state.peerConnection.addIceCandidate(new RTCIceCandidate(candidate))\n          .catch(e => console.error('[CHAT] Error adding ICE candidate', e));\n      }\n    });\n\n    socket.on('hangUp', () => {\n      console.log('[CHAT] Call ended by remote');\n      this.endCall();\n    });\n\n    this.setState({ socket });\n  };\n\n  // Helper to handle incoming offer -> setRemoteDesc -> createAnswer\n  handleOffer = (sdp, caller) => {\n    console.log('[CHAT] handleOffer => Setting remote desc & creating answer...');\n    const desc = new RTCSessionDescription(sdp);\n    this.state.peerConnection.setRemoteDescription(desc)\n      .then(() => {\n        console.log('[CHAT] Remote description set (offer). Creating answer...');\n        return this.state.peerConnection.createAnswer();\n      })\n      .then(answer => {\n        console.log('[CHAT] Created answer, setting local desc and sending...');\n        this.state.peerConnection.setLocalDescription(answer);\n        this.state.socket.emit('answer', {\n          sdp: answer,\n          target: caller,\n        });\n        this.setState({ callState: 'inCall' });\n      })\n      .catch(err => console.error('[CHAT] Error handling offer->answer', err));\n  };\n\n  // ============ CALLING FUNCTIONS ============\n  initiateCall = (contact) => {\n    if (!contact.id) return;\n    console.log('[CHAT] Initiating call with contact:', contact.id);\n\n    this.setState({\n      callState: 'calling',\n      contact: contact,\n    });\n\n    // Notify the callee that we're calling\n    this.state.socket.emit('callUser', {\n      recipientId: contact.id,\n      callerName: this.state.user?.username || 'Unknown Caller',\n    });\n\n    // Access microphone (audio only)\n    navigator.mediaDevices.getUserMedia({ audio: true, video: false })\n      .then(stream => {\n        console.log('[CHAT] Got localStream, tracks:', stream.getAudioTracks());\n        this.setState({ localStream: stream });\n\n        const peerConnection = this.createPeerConnection();\n\n        // Add local tracks\n        stream.getTracks().forEach(track => {\n          console.log('[CHAT] Adding local track:', track.label);\n          peerConnection.addTrack(track, stream);\n        });\n\n        // Create offer\n        peerConnection.createOffer()\n          .then(offer => {\n            console.log('[CHAT] Created offer, setting local desc');\n            peerConnection.setLocalDescription(offer);\n            console.log('[CHAT] Sending offer to server...');\n            this.state.socket.emit('offer', {\n              sdp: offer,\n              target: contact.id,\n            });\n          })\n          .catch(err => console.error('[CHAT] Offer creation error', err));\n\n        this.setState({ peerConnection });\n      })\n      .catch(err => console.error('[CHAT] getUserMedia error', err));\n  };\n\n  acceptCall = () => {\n    console.log('[CHAT] Accepting call from:', this.state.callerInfo);\n    this.setState({\n      incomingCallModal: false,\n      callState: 'inCall',\n    });\n\n    const callerId = this.state.callerInfo?.from;\n    if (callerId && (!this.state.contact.id || this.state.contact.id !== callerId)) {\n      this.setState({\n        contact: {\n          ...this.state.contact,\n          id: callerId,\n          name: this.state.callerInfo.callerName,\n        },\n      });\n    }\n\n    // Access microphone (audio only for now)\n    navigator.mediaDevices.getUserMedia({ audio: true, video: false })\n      .then(stream => {\n        console.log('[CHAT] Got localStream (callee), tracks:', stream.getAudioTracks());\n        this.setState({ localStream: stream });\n\n        const peerConnection = this.createPeerConnection();\n\n        // Add local tracks\n        stream.getTracks().forEach(track => {\n          console.log('[CHAT] Callee adding local track:', track.label);\n          peerConnection.addTrack(track, stream);\n        });\n\n        // Once the peerConnection is ready, if there's a stored pendingOffer, handle it now.\n        this.setState({ peerConnection }, () => {\n          if (this.state.pendingOffer) {\n            const { sdp, caller } = this.state.pendingOffer;\n            this.handleOffer(sdp, caller);\n            this.setState({ pendingOffer: null });\n          }\n        });\n      })\n      .catch(err => console.error('[CHAT] Error accessing mic (callee)', err));\n  };\n\n  rejectCall = () => {\n    console.log('[CHAT] Rejecting call from:', this.state.callerInfo);\n    this.setState({\n      incomingCallModal: false,\n      callState: 'idle',\n      callerInfo: null,\n      pendingOffer: null, // discard any stored offer\n    });\n    // Optionally notify the caller that call is rejected\n    // e.g. this.state.socket.emit('callRejected', {...});\n  };\n\n  createPeerConnection = () => {\n    console.log('[CHAT] Creating RTCPeerConnection...');\n    const configuration = {\n      iceServers: [\n        { urls: 'stun:stun1.l.google.com:19302' },\n        // Add a TURN server if needed for NAT traversal\n      ],\n    };\n    const peerConnection = new RTCPeerConnection(configuration);\n\n    // On ICE candidate\n    peerConnection.onicecandidate = (event) => {\n      if (event.candidate) {\n        const targetId =\n          this.state.contact.id ||\n          (this.state.callerInfo && this.state.callerInfo.from);\n        console.log('[CHAT] Sending ICE candidate to:', targetId);\n        this.state.socket.emit('iceCandidate', {\n          candidate: event.candidate,\n          target: targetId,\n        });\n      } else {\n        console.log('[CHAT] ICE gathering complete (no more candidates)');\n      }\n    };\n\n    // On track (remote stream)\n    peerConnection.ontrack = (event) => {\n      console.log('[CHAT] ontrack => remote track label:', event.track.label);\n      this.setState({ remoteStream: event.streams[0] });\n    };\n\n    // Handle connection state changes\n    peerConnection.onconnectionstatechange = () => {\n      const state = peerConnection.connectionState;\n      console.log('[CHAT] PeerConnection state:', state);\n      if (state === 'disconnected' || state === 'failed' || state === 'closed') {\n        console.log('[CHAT] PeerConnection ended, calling endCall()');\n        this.endCall();\n      }\n    };\n\n    return peerConnection;\n  };\n\n  endCall = () => {\n    console.log('[CHAT] endCall invoked');\n    const { socket, contact, callerInfo, peerConnection, localStream, callState } = this.state;\n    const targetId = contact.id || (callerInfo && callerInfo.from);\n\n    // If we are calling or in call, notify other side\n    if (callState === 'calling' || callState === 'inCall') {\n      console.log('[CHAT] Emitting hangUp to target:', targetId);\n      socket.emit('hangUp', { target: targetId });\n    }\n\n    // Close peerConnection\n    if (peerConnection) {\n      console.log('[CHAT] Closing peerConnection...');\n      peerConnection.close();\n    }\n\n    // Stop local media\n    if (localStream) {\n      console.log('[CHAT] Stopping localStream tracks');\n      localStream.getTracks().forEach(track => track.stop());\n    }\n\n    this.setState({\n      callState: 'idle',\n      peerConnection: null,\n      localStream: null,\n      remoteStream: null,\n      callerInfo: null,\n      incomingCallModal: false,\n      pendingOffer: null, // clear any pending offer\n    });\n  };\n\n  // ============ EXISTING MESSAGING LOGIC ============\n  onData = (user, contacts, messages, users) => {\n    console.log('[CHAT] onData => user:', user, ' contacts:', contacts.length);\n    let contact = contacts[0] || {};\n    this.setState({ messages, contacts, user, contact }, () => {\n      this.updateUsersState(users);\n    });\n  };\n\n  onNewMessage = (message) => {\n    if (message.sender === this.state.contact.id) {\n      this.setState({ typing: false });\n      this.state.socket.emit('seen', this.state.contact.id);\n      message.seen = true;\n    }\n    let newMessages = this.state.messages.concat(message);\n    this.setState({ messages: newMessages });\n  };\n\n  onTypingMessage = (sender) => {\n    if (this.state.contact.id !== sender) return;\n    this.setState({ typing: sender });\n    clearTimeout(this.state.timeout);\n    const timeout = setTimeout(() => this.setState({ typing: false }), 3000);\n    this.setState({ timeout });\n  };\n\n  onSocketError = (err) => {\n    console.error('[CHAT] Socket error:', err);\n    if (err === 'auth_error') {\n      Auth.logout();\n      this.props.history.push('/login');\n    }\n  };\n\n  updateUsersState = (users) => {\n    let contacts = this.state.contacts;\n    contacts.forEach((element, index) => {\n      if (users[element.id]) contacts[index].status = users[element.id];\n    });\n    this.setState({ contacts });\n    let contact = this.state.contact;\n    if (users[contact.id]) contact.status = users[contact.id];\n    this.setState({ contact });\n  };\n\n  sendMessage = (message) => {\n    if (!this.state.contact.id) return;\n    message.receiver = this.state.contact.id;\n    let newMessages = this.state.messages.concat(message);\n    this.setState({ messages: newMessages });\n    this.state.socket.emit('message', message);\n  };\n\n  sendType = () => {\n    if (this.state.contact.id) {\n      this.state.socket.emit('typing', this.state.contact.id);\n    }\n  };\n\n  logout = () => {\n    console.log('[CHAT] Logging out user');\n    this.state.socket.disconnect();\n    Auth.logout();\n    this.props.history.push('/');\n  };\n\n  // ============ RENDERING ============\n  render() {\n    if (!this.state.connected || !this.state.contacts || !this.state.messages) {\n      return <Spinner id=\"loader\" color=\"success\" />;\n    }\n\n    return (\n      <Row className=\"h-100\">\n        {/* LEFT: Contacts Section */}\n        <div id=\"contacts-section\" className=\"col-6 col-md-4\">\n          <ContactHeader user={this.state.user} toggle={this.profileToggle} />\n          <Contacts\n            contacts={this.state.contacts}\n            messages={this.state.messages}\n            onChatNavigate={this.onChatNavigate}\n          />\n          <UserProfile\n            contact={this.state.contact}\n            toggle={this.userProfileToggle}\n            open={this.state.userProfile}\n          />\n          <EditProfile\n            user={this.state.user}\n            toggle={this.profileToggle}\n            open={this.state.profile}\n          />\n        </div>\n\n        {/* RIGHT: Messages Section */}\n        <div id=\"messages-section\" className=\"col-6 col-md-8\">\n          <ChatHeader\n            contact={this.state.contact}\n            typing={this.state.typing}\n            toggle={this.userProfileToggle}\n            logout={this.logout}\n            // pass the call method so ChatHeader can call\n            onCall={this.initiateCall}\n          />\n          {this.renderChat()}\n          <MessageForm sender={this.sendMessage} sendType={this.sendType} />\n\n          {/* Hang Up button if in a call */}\n          {(this.state.callState === 'calling' || this.state.callState === 'inCall') && (\n            <Button color=\"danger\" onClick={this.endCall} className=\"mt-2\">\n              Hang Up\n            </Button>\n          )}\n\n          {/* Audio element for remote stream */}\n          {this.state.remoteStream && (\n            <audio\n              ref={(audioEl) => {\n                if (audioEl && this.state.remoteStream) {\n                  console.log('[CHAT] Attaching remoteStream to audio element');\n                  audioEl.srcObject = this.state.remoteStream;\n                }\n              }}\n              autoPlay\n            />\n          )}\n        </div>\n\n        {/* INCOMING CALL MODAL */}\n        <Modal isOpen={this.state.incomingCallModal}>\n          <ModalHeader>Incoming Call</ModalHeader>\n          <ModalBody>\n            {this.state.callerInfo && (\n              <p>{this.state.callerInfo.callerName} is calling...</p>\n            )}\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"success\" onClick={this.acceptCall}>Accept</Button>\n            <Button color=\"secondary\" onClick={this.rejectCall}>Reject</Button>\n          </ModalFooter>\n        </Modal>\n      </Row>\n    );\n  }\n\n  renderChat = () => {\n    const { contact, user, messages } = this.state;\n    if (!contact || !contact.id) return null;\n    let filtered = messages.filter(\n      (m) => m.sender === contact.id || m.receiver === contact.id\n    );\n    return <Messages user={user} messages={filtered} />;\n  };\n\n  onChatNavigate = (contact) => {\n    console.log('[CHAT] onChatNavigate => switching to contact:', contact.id);\n    this.setState({ contact });\n    this.state.socket.emit('seen', contact.id);\n    let newMessages = this.state.messages.map((m) => {\n      if (m.sender === contact.id) {\n        return { ...m, seen: true };\n      }\n      return m;\n    });\n    this.setState({ messages: newMessages });\n  };\n\n  userProfileToggle = () => this.setState({ userProfile: !this.state.userProfile });\n  profileToggle = () => this.setState({ profile: !this.state.profile });\n}\n\nexport default Chat;\n","import React from 'react';\n\n/**\n * NotFound Component Page.\n * @param props\n */\nconst NotFound = props => {\n    return (\n        <h3>The requested page was not found</h3>\n    );\n};\n\nexport default NotFound;\n","export default __webpack_public_path__ + \"static/media/logo.2e5b0bba.png\";","import React from 'react';\nimport './auth.css'; //   CSS \nimport { Link } from 'react-router-dom';\nimport { Card, Form, Input, Button } from 'reactstrap';\nimport Error from 'components/Error';\nimport Logo from 'assets/logo.png';\nimport Auth from 'Auth';\nimport axios from 'axios';\n\nclass Register extends React.Component {\n  state = { name: '', username: '', password: '', error: '' };\n\n  onChange = e => this.setState({ [e.target.name]: e.target.value, error: null });\n\n  onSubmit = e => {\n    e.preventDefault();\n    let data = { name: this.state.name, username: this.state.username, password: this.state.password };\n    axios.post('/api/auth/register', data)\n      .then(res => {\n        Auth.login(res.data);\n        this.props.history.push('/');\n      })\n      .catch(err => this.setState({ error: err.response.data.message }));\n  };\n\n  render() {\n    return (\n      <div className=\"auth-container\">\n        <Form onSubmit={this.onSubmit}>\n          <img src={Logo} alt=\"Logo\" />\n          <h5 className=\"auth-header\">Create a New Account</h5>\n          <Error error={this.state.error} />\n          <Input className=\"auth-form-control\" value={this.state.name} name=\"name\" onChange={this.onChange} placeholder=\"Name\" required />\n          <Input className=\"auth-form-control\" value={this.state.username} name=\"username\" onChange={this.onChange} placeholder=\"Username\" required />\n          <Input type=\"password\" className=\"auth-form-control\" value={this.state.password} name=\"password\" onChange={this.onChange} placeholder=\"Password\" required />\n          <Button className=\"auth-button\" block>Create</Button>\n          <small className=\"auth-footer\">\n            <Link to=\"/login\">Login</Link>\n          </small>\n          <p className=\"auth-footer\">&copy; {new Date().getFullYear()}</p>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default Register;\n","import React from 'react';\nimport './auth.css'; //   CSS \nimport { Link } from 'react-router-dom';\nimport { Card, Form, Input, Button } from 'reactstrap';\nimport Error from 'components/Error';\nimport Logo from 'assets/logo.png';\nimport Auth from 'Auth';\nimport axios from 'axios';\n\nclass Login extends React.Component {\n  state = { username: '', password: '', error: '' };\n\n  onChange = e => this.setState({ [e.target.name]: e.target.value, error: null });\n\n  onSubmit = e => {\n    e.preventDefault();\n    let data = { username: this.state.username, password: this.state.password };\n    axios.post('/api/auth', data)\n      .then(res => {\n        Auth.login(res.data);\n        this.props.history.push('/');\n      })\n      .catch(err => this.setState({ error: err.response.data.message }));\n  };\n\n  render() {\n    return (\n      <div className=\"auth-container\">\n        <Form onSubmit={this.onSubmit}>\n          <img src={Logo} alt=\"Logo\" />\n          <h5 className=\"auth-header\">Login</h5>\n          <Error error={this.state.error} />\n          <Input className=\"auth-form-control\" value={this.state.username} name=\"username\" onChange={this.onChange} placeholder=\"Username\" required />\n          <Input type=\"password\" className=\"auth-form-control\" value={this.state.password} name=\"password\" onChange={this.onChange} placeholder=\"Password\" required />\n          <Button className=\"auth-button\" block>Login</Button>\n          <small className=\"auth-footer\">\n            <Link to=\"/register\">Create a new account</Link>\n          </small>\n          <p className=\"auth-footer\">&copy; {new Date().getFullYear()}</p>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Card, Form, Input, Button } from \"reactstrap\";\nimport { Error } from \"components\";\nimport axios from \"axios\";\nimport logo from 'assets/logo.png';\n\n/**\n * Change Password Component.\n */\nclass Password extends React.Component {\n\n   state = {password: '', newPassword: ''};\n\n    /**\n     * Change form handler\n     * @param e\n     */\n    onChange = e => this.setState({\n       [e.target.name]: e.target.value, error: null\n   });\n\n    /**\n     * Form submit handler.\n     * @param e\n     */\n    onSubmit = e => {\n       e.preventDefault();\n       let data = { password: this.state.password, newPassword: this.state.newPassword };\n       axios.post('/api/account/password', data)\n       .then(res => {\n           this.props.history.push('/')\n       })\n       .catch(err => {\n           this.setState({error: err.response.data.message });\n       });\n   };\n\n    /**\n     * Render Component.\n     */\n    render(){\n       return (\n           <Card className=\"auth col-lg-3 col-sm-6\">\n               <Form onSubmit={this.onSubmit}>\n                   <img src={logo} alt=\"\" width=\"200\" />\n                   <h5 className=\"mb-4\">Change Password</h5>\n                   <Error error={this.state.error} />\n                   <Input type=\"password\" value={this.state.password} name=\"password\" onChange={this.onChange} placeholder=\"Current Password\" required />\n                   <Input type=\"password\" value={this.state.newPassword} name=\"newPassword\" onChange={this.onChange} placeholder=\"New Password\" required />\n                   <Button block className=\"mb-3\">Change</Button>\n                   <small><Link to=\"/\">Back</Link></small>\n                   <p className=\"m-3 mb-3 text-muted\">&copy; { new Date().getFullYear() }</p>\n               </Form>\n           </Card>\n       );\n   }\n\n}\n\nexport default Password;\n","import Chat from './Chat';\nimport NotFound from './NotFound';\nimport Register from './Register';\nimport Login from './Login';\nimport Password from './Password';\n\n/**\n * Export views.\n */\nexport {\n    Chat, NotFound, Register, Login, Password\n}","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Switch } from 'react-router-dom';\r\nimport AppRoute from './AppRoute';\r\nimport { Chat, NotFound, Register, Login, Password } from 'views';\r\nimport Auth from './Auth';\r\n\r\nclass App extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        Auth.init();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n           <div id=\"main-container\" className=\"container-fluid\">\r\n               <Router>\r\n                   <Switch>\r\n                       <AppRoute path='/' exact component={Chat} can={Auth.auth} redirect='/login' />\r\n                       <AppRoute path='/password' component={Password} can={Auth.auth} redirect='/login' />\r\n                       <AppRoute path='/password' component={Password} can={Auth.auth} redirect='/login' />\r\n                       <AppRoute path='/register' component={Register} can={Auth.guest} redirect='/' />\r\n                       <AppRoute path='/Login' component={Login} can={Auth.guest} redirect='/' />\r\n                       <AppRoute component={NotFound} />\r\n                   </Switch>\r\n               </Router>\r\n           </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\n\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin"]}}